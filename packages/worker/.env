# Worker 配置

# Worker ID（必须与数据库中的 worker_id 一致）
WORKER_ID=worker1

# 浏览器模式：true = headless（后台运行），false = 可见浏览器（调试用）
HEADLESS=false

# 🚀 浏览器内存优化预设（详见 docs/浏览器内存优化指南.md）
# - MAXIMUM_SAVINGS: 最大内存节省（150-250MB/账户），稳定性较差
# - BALANCED: 平衡模式（200-350MB/账户），推荐使用 ✅
# - MINIMAL: 最小优化（300-500MB/账户），稳定性最好
BROWSER_MEMORY_PRESET=BALANCED

# Master 地址
MASTER_HOST=localhost
MASTER_PORT=3000

# 账号状态上报配置
ACCOUNT_STATUS_REPORT_INTERVAL=10000    # 账号状态上报间隔(ms) - Worker 每1分钟上报一次账号状态
ACCOUNT_STATUS_BATCH_SIZE=50            # 批量上报最大账号数 - 单次最多上报50个账号

# 日志级别
LOG_LEVEL=info

# 新数据推送配置 (IsNewPushTask)
IS_NEW_PUSH_INTERVAL=60000              # 推送检查周期（毫秒）- 建议 60000 (60秒)
IS_NEW_PUSH_MAX_TIMES=3                 # 单条数据最多推送次数 - 建议 3 次
IS_NEW_FILTER_ENABLED=true              # 启用新数据过滤推送

# 登录检测任务配置
LOGIN_CHECK_INTERVAL=30                 # 登录检测间隔（秒）- 每30秒检测一次登录状态
LOGIN_CHECK_ENABLED=true                # 启用独立登录检测任务

# 爬虫任务配置 (MonitorTask)
CRAWL_INTERVAL_MIN=1                # 爬虫最小间隔（分钟）- 默认 0.5 分钟 (30秒)
CRAWL_INTERVAL_MAX=10               # 爬虫最大间隔（分钟）- 默认 0.5 分钟 (30秒)

# ============================================================================
# API 爬虫配置 (DouyinAPICrawler)
# 定时自动抓取作品、评论和二级评论，无需打开浏览器窗口
# 详见文档: docs/API爬虫使用指南.md
# ============================================================================

# 基础配置
API_CRAWLER_ENABLED=true                        # 是否启用 API 爬虫（默认 true）
API_CRAWLER_INTERVAL=30                         # 执行间隔（秒）- 测试用 30 秒（生产环境建议 300 秒 = 5 分钟）
API_CRAWLER_AUTO_START=true                     # 是否自动启动（默认 true）

# 作品抓取配置
API_CRAWLER_WORKS_PAGE_SIZE=50                  # 每页作品数量（完整性测试）
API_CRAWLER_WORKS_MAX_PAGES=9999                # 最多抓取页数（9999 = 不限制，抓取所有）

# 评论抓取配置
API_CRAWLER_COMMENTS_ENABLED=true               # 是否抓取评论（默认 true）
API_CRAWLER_COMMENTS_PAGE_SIZE=20               # 每页评论数量（完整性测试）
API_CRAWLER_COMMENTS_MAX_PAGES=9999             # 每个作品最多抓取页数（9999 = 不限制，抓取所有）
API_CRAWLER_COMMENTS_MAX_COMMENTS=999999        # 每个作品最多抓取评论数（999999 = 不限制，抓取所有）

# 二级评论抓取配置
API_CRAWLER_REPLIES_ENABLED=true                # 是否抓取二级评论（默认 true）
API_CRAWLER_REPLIES_PAGE_SIZE=20                # 每页二级评论数量（完整性测试）
API_CRAWLER_REPLIES_MAX_PAGES=9999              # 每个一级评论最多抓取页数（9999 = 不限制，抓取所有）
API_CRAWLER_REPLIES_MAX_REPLIES=999999          # 每个一级评论最多抓取数量（999999 = 不限制，抓取所有）

# 延迟配置（防止触发限流）
API_CRAWLER_DELAY_BETWEEN_WORKS=500             # 作品之间的延迟（毫秒）- 测试用 0.5 秒（生产环境建议 2000ms）
API_CRAWLER_DELAY_BETWEEN_COMMENT_PAGES=300     # 评论分页之间的延迟（毫秒）- 测试用 0.3 秒（生产环境建议 1000ms）
API_CRAWLER_DELAY_BETWEEN_REPLIES=200           # 二级评论之间的延迟（毫秒）- 测试用 0.2 秒（生产环境建议 500ms）

# 推荐配置示例：
# 小账户（< 100 作品）:
#   API_CRAWLER_INTERVAL=300 (5 分钟)
#   API_CRAWLER_COMMENTS_MAX_PAGES=10
#
# 中等账户（100-1000 作品）:
#   API_CRAWLER_INTERVAL=600 (10 分钟)
#   API_CRAWLER_COMMENTS_MAX_PAGES=25
#
# 大账户（> 1000 作品）:
#   API_CRAWLER_INTERVAL=1800 (30 分钟)
#   API_CRAWLER_COMMENTS_MAX_PAGES=50
#   API_CRAWLER_REPLIES_ENABLED=false  # 关闭二级评论以节省时间
