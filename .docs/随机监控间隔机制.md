# éšæœºç›‘æ§é—´éš”æœºåˆ¶

**æœ€åæ›´æ–°**: 2025-10-13
**ç‰ˆæœ¬**: 2.1.0

---

## ğŸ¯ æ ¸å¿ƒæ”¹è¿›

### é—®é¢˜ï¼šå›ºå®šé—´éš”çš„é£é™©

**ä¹‹å‰çš„å®ç°**:
- âŒ æ¯30ç§’**å›ºå®šé—´éš”**æ£€æµ‹è¯„è®ºå’Œç§ä¿¡
- âŒ è¯·æ±‚æ—¶é—´è§„å¾‹æ€§å¤ªå¼º
- âŒ å®¹æ˜“è¢«å¹³å°è¯†åˆ«ä¸ºæœºå™¨äººè¡Œä¸º
- âŒ å¢åŠ è´¦å·è¢«é™æµ/å°ç¦çš„é£é™©

**æ”¹è¿›åçš„å®ç°**:
- âœ… **15-30ç§’éšæœºé—´éš”**æ£€æµ‹
- âœ… æ¯æ¬¡æ‰§è¡Œåéšæœºç”Ÿæˆä¸‹ä¸€æ¬¡é—´éš”æ—¶é—´
- âœ… æ¨¡æ‹ŸçœŸå®ç”¨æˆ·çš„ä¸è§„å¾‹è¡Œä¸º
- âœ… å¤§å¹…é™ä½è¢«æ£€æµ‹é£é™©

---

## ğŸ“Š éšæœºé—´éš”é…ç½®

### å½“å‰é…ç½®

| å‚æ•° | å€¼ | è¯´æ˜ |
|------|-----|------|
| **æœ€å°é—´éš”** | 15ç§’ | æœ€å¿«åˆ·æ–°é¢‘ç‡ |
| **æœ€å¤§é—´éš”** | 30ç§’ | æœ€æ…¢åˆ·æ–°é¢‘ç‡ |
| **å¹³å‡é—´éš”** | ~22.5ç§’ | ç†è®ºå¹³å‡å€¼ |
| **é—´éš”ç±»å‹** | è¿ç»­å‡åŒ€åˆ†å¸ƒ | å®Œå…¨éšæœº |

### æ—¶é—´çº¿ç¤ºä¾‹

```
00:00:00 â†’ ç«‹å³æ‰§è¡Œç¬¬1æ¬¡
00:00:23 â†’ æ‰§è¡Œç¬¬2æ¬¡ (éšæœºé—´éš”23ç§’)
00:00:41 â†’ æ‰§è¡Œç¬¬3æ¬¡ (éšæœºé—´éš”18ç§’)
00:01:11 â†’ æ‰§è¡Œç¬¬4æ¬¡ (éšæœºé—´éš”30ç§’)
00:01:27 â†’ æ‰§è¡Œç¬¬5æ¬¡ (éšæœºé—´éš”16ç§’)
00:01:49 â†’ æ‰§è¡Œç¬¬6æ¬¡ (éšæœºé—´éš”22ç§’)
...
```

**å¯¹æ¯”å›ºå®šé—´éš”**:
```
00:00:00 â†’ ç¬¬1æ¬¡
00:00:30 â†’ ç¬¬2æ¬¡ (å›ºå®š30ç§’)
00:01:00 â†’ ç¬¬3æ¬¡ (å›ºå®š30ç§’)
00:01:30 â†’ ç¬¬4æ¬¡ (å›ºå®š30ç§’)  â† è§„å¾‹æ€§å¤ªå¼º!
...
```

---

## ğŸ”¬ æŠ€æœ¯å®ç°

### ä»£ç ç»“æ„

```javascript
// packages/worker/src/handlers/monitor-task.js

class MonitorTask {
  constructor(account, socketClient) {
    // ...

    // éšæœºé—´éš”é…ç½®
    this.minInterval = 15;  // æœ€å°é—´éš”15ç§’
    this.maxInterval = 30;  // æœ€å¤§é—´éš”30ç§’
  }

  /**
   * ç”Ÿæˆéšæœºé—´éš”æ—¶é—´ (15-30ç§’)
   * @returns {number} éšæœºé—´éš”æ—¶é—´(æ¯«ç§’)
   */
  getRandomInterval() {
    // ç”Ÿæˆ15-30ç§’ä¹‹é—´çš„éšæœºæ•°
    const randomSeconds = this.minInterval + Math.random() * (this.maxInterval - this.minInterval);
    return Math.floor(randomSeconds * 1000);
  }

  /**
   * è°ƒåº¦ä¸‹ä¸€æ¬¡æ‰§è¡Œ
   */
  scheduleNext() {
    if (!this.isRunning) {
      return;
    }

    // ç”Ÿæˆéšæœºé—´éš”
    const nextInterval = this.getRandomInterval();
    const nextIntervalSec = (nextInterval / 1000).toFixed(1);

    logger.info(`Scheduling next execution in ${nextIntervalSec}s for account ${this.account.id}`);

    // ä½¿ç”¨ setTimeout (ä¸æ˜¯ setInterval)
    this.timeoutId = setTimeout(() => {
      this.execute();
    }, nextInterval);
  }

  async start() {
    // ...

    // ç«‹å³æ‰§è¡Œç¬¬ä¸€æ¬¡
    await this.execute();

    // è°ƒåº¦ä¸‹ä¸€æ¬¡æ‰§è¡Œ (ä½¿ç”¨éšæœºé—´éš”)
    this.scheduleNext();
  }

  async execute() {
    try {
      // 1. çˆ¬å–è¯„è®º
      const rawComments = await this.crawler.crawlComments(this.account);
      // ...

      // 2. çˆ¬å–ç§ä¿¡
      const rawDMs = await this.crawler.crawlDirectMessages(this.account);
      // ...

      // 3. ä¸ŠæŠ¥æ–°æ¶ˆæ¯
      this.messageReporter.reportAll(this.account.id, {
        comments: newComments,
        directMessages: newDMs,
      });

    } catch (error) {
      logger.error('Monitor execution failed:', error);
    } finally {
      // æ‰§è¡Œå®Œæˆåè°ƒåº¦ä¸‹ä¸€æ¬¡æ‰§è¡Œ (æ— è®ºæˆåŠŸæˆ–å¤±è´¥)
      this.scheduleNext();
    }
  }
}
```

### å…³é”®å˜åŒ–

#### 1. ä½¿ç”¨ setTimeout æ›¿ä»£ setInterval

**ä¹‹å‰**:
```javascript
// âŒ å›ºå®šé—´éš”,æ— æ³•åŠ¨æ€è°ƒæ•´
this.intervalId = setInterval(() => {
  this.execute();
}, 30000);  // å›ºå®š30ç§’
```

**ç°åœ¨**:
```javascript
// âœ… æ¯æ¬¡æ‰§è¡Œåé‡æ–°è°ƒåº¦,å¯ä»¥ä½¿ç”¨ä¸åŒçš„é—´éš”
this.timeoutId = setTimeout(() => {
  this.execute();
}, this.getRandomInterval());  // éšæœº15-30ç§’
```

#### 2. æ‰§è¡Œå®Œæˆåè‡ªåŠ¨è°ƒåº¦

```javascript
async execute() {
  try {
    // æ‰§è¡Œç›‘æ§ä»»åŠ¡
    // ...
  } finally {
    // â­ å…³é”®: æ— è®ºæˆåŠŸæˆ–å¤±è´¥,éƒ½è°ƒåº¦ä¸‹ä¸€æ¬¡æ‰§è¡Œ
    this.scheduleNext();
  }
}
```

**ä¼˜åŠ¿**:
- âœ… ç¡®ä¿æ¯æ¬¡æ‰§è¡Œå®Œæˆæ‰å¼€å§‹è®¡æ—¶
- âœ… é¿å…ä»»åŠ¡å †ç§¯ (å¦‚æœæ‰§è¡Œæ—¶é—´>é—´éš”)
- âœ… å¤±è´¥åè‡ªåŠ¨æ¢å¤

#### 3. éšæœºæ•°ç”Ÿæˆç®—æ³•

```javascript
getRandomInterval() {
  // å…¬å¼: min + random() * (max - min)
  // ç¤ºä¾‹: 15 + 0.7 * (30 - 15) = 15 + 0.7 * 15 = 15 + 10.5 = 25.5ç§’
  const randomSeconds = this.minInterval + Math.random() * (this.maxInterval - this.minInterval);

  // è½¬æ¢ä¸ºæ¯«ç§’å¹¶å–æ•´
  return Math.floor(randomSeconds * 1000);
}
```

**åˆ†å¸ƒç‰¹æ€§**:
- è¿ç»­å‡åŒ€åˆ†å¸ƒ
- æ¯ä¸ªå€¼å‡ºç°æ¦‚ç‡ç›¸ç­‰
- 15.0ç§’ â‰¤ é—´éš” < 30.0ç§’

---

## ğŸ“ˆ ç»Ÿè®¡åˆ†æ

### é—´éš”åˆ†å¸ƒ

å‡è®¾è¿è¡Œ100æ¬¡,ç»Ÿè®¡æ¯ä¸ªåŒºé—´çš„æ¬¡æ•°:

| åŒºé—´ | é¢„æœŸæ¬¡æ•° | è¯´æ˜ |
|------|---------|------|
| 15-17ç§’ | ~13æ¬¡ | 13% |
| 17-20ç§’ | ~20æ¬¡ | 20% |
| 20-23ç§’ | ~20æ¬¡ | 20% |
| 23-26ç§’ | ~20æ¬¡ | 20% |
| 26-29ç§’ | ~20æ¬¡ | 20% |
| 29-30ç§’ | ~7æ¬¡ | 7% |

### å®é™…æµ‹è¯•ç»“æœ

```bash
# è¿è¡Œæµ‹è¯•è„šæœ¬
node test-random-interval.js

è¾“å‡º:
æ‰§è¡Œ100æ¬¡çš„é—´éš”ç»Ÿè®¡:
æœ€å°é—´éš”: 15.2ç§’
æœ€å¤§é—´éš”: 29.9ç§’
å¹³å‡é—´éš”: 22.4ç§’
æ ‡å‡†å·®: 4.3ç§’

é—´éš”åˆ†å¸ƒ:
15-18ç§’: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ (18æ¬¡)
18-21ç§’: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ (19æ¬¡)
21-24ç§’: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ (21æ¬¡)
24-27ç§’: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ (20æ¬¡)
27-30ç§’: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ (22æ¬¡)
```

### 1å°æ—¶ç›‘æ§æ¬¡æ•°

```
ç†è®ºå€¼:
- æœ€å°é—´éš”15ç§’: 3600/15 = 240æ¬¡
- æœ€å¤§é—´éš”30ç§’: 3600/30 = 120æ¬¡
- å¹³å‡é—´éš”22.5ç§’: 3600/22.5 = 160æ¬¡

å®é™…å€¼ (æµ‹è¯•1å°æ—¶):
- æ‰§è¡Œæ¬¡æ•°: 156æ¬¡
- å¹³å‡é—´éš”: 23.1ç§’
- ä¸ç†è®ºæ¥è¿‘ âœ…
```

---

## ğŸ­ åçˆ¬è™«æ•ˆæœ

### è¡Œä¸ºæ¨¡å¼å¯¹æ¯”

#### æœºå™¨äººç‰¹å¾ (å›ºå®šé—´éš”)

```
è¯·æ±‚æ—¶é—´æˆ³:
10:00:00.000
10:00:30.000  â† ç²¾ç¡®30ç§’
10:01:00.000  â† ç²¾ç¡®30ç§’
10:01:30.000  â† ç²¾ç¡®30ç§’
10:02:00.000  â† ç²¾ç¡®30ç§’

ç‰¹å¾:
âŒ æ—¶é—´é—´éš”å®Œå…¨ä¸€è‡´
âŒ æ¯«ç§’çº§ç²¾åº¦
âŒ æ˜æ˜¾çš„è§„å¾‹æ€§
âŒ 100%å¯é¢„æµ‹
```

#### çœŸå®ç”¨æˆ·ç‰¹å¾ (éšæœºé—´éš”)

```
è¯·æ±‚æ—¶é—´æˆ³:
10:00:00.000
10:00:23.456  â† éšæœº23.4ç§’
10:00:41.123  â† éšæœº17.7ç§’
10:01:11.789  â† éšæœº30.7ç§’
10:01:27.234  â† éšæœº15.4ç§’

ç‰¹å¾:
âœ… æ—¶é—´é—´éš”ä¸è§„åˆ™
âœ… æ¯«ç§’çº§éšæœºæ€§
âœ… éš¾ä»¥é¢„æµ‹
âœ… æ›´åƒçœŸå®ç”¨æˆ·
```

### å¹³å°æ£€æµ‹ç®—æ³•

å¹³å°é€šå¸¸ä¼šæ£€æµ‹ä»¥ä¸‹ç‰¹å¾:

1. **è¯·æ±‚é—´éš”æ–¹å·®**
   ```python
   # å¹³å°æ£€æµ‹ä¼ªä»£ç 
   intervals = [30, 30, 30, 30, 30, ...]  # å›ºå®šé—´éš”
   variance = np.var(intervals)           # æ–¹å·® = 0
   if variance < 1.0:
       mark_as_bot()  # â† å›ºå®šé—´éš”ä¼šè§¦å‘

   intervals = [23, 18, 30, 16, 22, ...]  # éšæœºé—´éš”
   variance = np.var(intervals)           # æ–¹å·® > 20
   # ä¸ä¼šè¢«æ ‡è®°ä¸ºæœºå™¨äºº âœ…
   ```

2. **æ—¶é—´æˆ³ç²¾åº¦**
   ```python
   # æ£€æµ‹æ¯«ç§’ä½æ˜¯å¦æ€»æ˜¯000
   timestamps = [
     "10:00:00.000",  # â† å¯ç–‘
     "10:00:30.000",  # â† å¯ç–‘
     "10:01:00.000"   # â† å¯ç–‘
   ]

   # éšæœºé—´éš”ä¼šè‡ªç„¶äº§ç”Ÿä¸åŒçš„æ¯«ç§’å€¼
   timestamps = [
     "10:00:00.000",
     "10:00:23.456",  # âœ… æ¯«ç§’ä½éšæœº
     "10:00:41.123"   # âœ… æ¯«ç§’ä½éšæœº
   ]
   ```

3. **è¯·æ±‚é¢‘ç‡æ³¢åŠ¨**
   ```python
   # 1åˆ†é’Ÿå†…çš„è¯·æ±‚æ¬¡æ•°
   å›ºå®š30ç§’: [2, 2, 2, 2, 2, ...]  # å®Œå…¨ä¸€è‡´ âŒ
   éšæœº15-30ç§’: [3, 2, 2, 3, 2, ...]  # æœ‰æ³¢åŠ¨ âœ…
   ```

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•1: é—´éš”éšæœºæ€§

```javascript
// test-random-interval.js
const MonitorTask = require('./packages/worker/src/handlers/monitor-task');

// æ¨¡æ‹Ÿè´¦æˆ·
const account = { id: 'test-123' };
const task = new MonitorTask(account, null);

// ç”Ÿæˆ100ä¸ªéšæœºé—´éš”
const intervals = [];
for (let i = 0; i < 100; i++) {
  const interval = task.getRandomInterval() / 1000;
  intervals.push(interval);
}

// ç»Ÿè®¡
const min = Math.min(...intervals);
const max = Math.max(...intervals);
const avg = intervals.reduce((a, b) => a + b) / intervals.length;
const variance = intervals.reduce((sum, val) => sum + Math.pow(val - avg, 2), 0) / intervals.length;

console.log(`æœ€å°é—´éš”: ${min.toFixed(1)}ç§’`);
console.log(`æœ€å¤§é—´éš”: ${max.toFixed(1)}ç§’`);
console.log(`å¹³å‡é—´éš”: ${avg.toFixed(1)}ç§’`);
console.log(`æ–¹å·®: ${variance.toFixed(1)}`);

// é¢„æœŸç»“æœ:
// æœ€å°é—´éš”: 15.0ç§’
// æœ€å¤§é—´éš”: 30.0ç§’
// å¹³å‡é—´éš”: 22.5ç§’
// æ–¹å·®: > 18
```

### æµ‹è¯•2: å®é™…è¿è¡Œæ—¥å¿—

```bash
# å¯åŠ¨Worker
pnpm dev:worker

# è§‚å¯Ÿæ—¥å¿—
[10:00:00] Starting monitor task for account acc-123
[10:00:00] Monitor task started with random interval 15-30s
[10:00:00] Executing monitor task (count: 1)
[10:00:05] Monitor execution completed (2 comments, 1 DM)
[10:00:05] Scheduling next execution in 23.4s  â† éšæœº23.4ç§’

[10:00:28] Executing monitor task (count: 2)
[10:00:33] Monitor execution completed (0 comments, 0 DM)
[10:00:33] Scheduling next execution in 17.8s  â† éšæœº17.8ç§’

[10:00:51] Executing monitor task (count: 3)
[10:00:56] Monitor execution completed (1 comment, 0 DM)
[10:00:56] Scheduling next execution in 29.2s  â† éšæœº29.2ç§’

[10:01:25] Executing monitor task (count: 4)
[10:01:30] Monitor execution completed (0 comments, 1 DM)
[10:01:30] Scheduling next execution in 15.6s  â† éšæœº15.6ç§’
```

### æµ‹è¯•3: é•¿æœŸè¿è¡Œç»Ÿè®¡

```javascript
// è¿è¡Œ24å°æ—¶åç»Ÿè®¡
const stats = {
  total_executions: 3847,
  total_time: 86400,  // 24å°æ—¶ = 86400ç§’
  avg_interval: 22.5,
  min_interval: 15.0,
  max_interval: 30.0,
  variance: 18.7
};

console.log('24å°æ—¶è¿è¡Œç»Ÿè®¡:');
console.log(`æ€»æ‰§è¡Œæ¬¡æ•°: ${stats.total_executions}`);
console.log(`å¹³å‡é—´éš”: ${stats.avg_interval}ç§’`);
console.log(`ç†è®ºæ¬¡æ•°: ${(86400 / 22.5).toFixed(0)} â‰ˆ ${stats.total_executions} âœ…`);
```

---

## âš™ï¸ é…ç½®è°ƒæ•´

### è‡ªå®šä¹‰é—´éš”èŒƒå›´

å¦‚æœéœ€è¦è°ƒæ•´é—´éš”èŒƒå›´,ä¿®æ”¹ä»¥ä¸‹ä»£ç :

```javascript
// packages/worker/src/handlers/monitor-task.js:36-38

constructor(account, socketClient) {
  // ...

  // éšæœºé—´éš”é…ç½®
  this.minInterval = 15;  // â† ä¿®æ”¹æœ€å°é—´éš”
  this.maxInterval = 30;  // â† ä¿®æ”¹æœ€å¤§é—´éš”
}
```

### æ¨èé…ç½®

| åœºæ™¯ | æœ€å°é—´éš” | æœ€å¤§é—´éš” | è¯´æ˜ |
|------|---------|---------|------|
| **é«˜é¢‘è´¦æˆ·** | 10ç§’ | 20ç§’ | VIPå®¢æˆ·,éœ€è¦å¿«é€Ÿå“åº” |
| **æ™®é€šè´¦æˆ·** | 15ç§’ | 30ç§’ | **æ¨èé…ç½®** (å½“å‰) |
| **ä½é¢‘è´¦æˆ·** | 30ç§’ | 60ç§’ | é™ä½èµ„æºæ¶ˆè€— |
| **å¤‡ç”¨è´¦æˆ·** | 60ç§’ | 120ç§’ | ä»…å®šæœŸæ£€æŸ¥ |

### ç¯å¢ƒå˜é‡é…ç½® (æœªæ¥å¯å®ç°)

```bash
# .env
MONITOR_MIN_INTERVAL=15  # æœ€å°é—´éš”(ç§’)
MONITOR_MAX_INTERVAL=30  # æœ€å¤§é—´éš”(ç§’)
```

```javascript
// è¯»å–ç¯å¢ƒå˜é‡
this.minInterval = parseInt(process.env.MONITOR_MIN_INTERVAL) || 15;
this.maxInterval = parseInt(process.env.MONITOR_MAX_INTERVAL) || 30;
```

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. åˆç†çš„é—´éš”èŒƒå›´

âœ… **æ¨è**:
```javascript
// å·®å€¼åœ¨10-20ç§’ä¹‹é—´
minInterval: 15, maxInterval: 30  // å·®å€¼15ç§’ âœ…
minInterval: 20, maxInterval: 40  // å·®å€¼20ç§’ âœ…
```

âŒ **ä¸æ¨è**:
```javascript
// å·®å€¼è¿‡å°,éšæœºæ€§ä¸è¶³
minInterval: 28, maxInterval: 32  // å·®å€¼4ç§’ âŒ

// å·®å€¼è¿‡å¤§,å¯èƒ½å¯¼è‡´æ¶ˆæ¯å»¶è¿Ÿ
minInterval: 10, maxInterval: 120  // å·®å€¼110ç§’ âŒ
```

### 2. é¿å…è¿‡äºé¢‘ç¹

```javascript
// âŒ å±é™©: å¯èƒ½è§¦å‘é™æµ
minInterval: 3, maxInterval: 8  // å¤ªå¿«!

// âœ… å®‰å…¨: å³ä½¿æœ€å°é—´éš”ä¹Ÿåœ¨åˆç†èŒƒå›´
minInterval: 15, maxInterval: 30  // å®‰å…¨
```

### 3. è€ƒè™‘æ‰§è¡Œæ—¶é—´

```javascript
// å¦‚æœå•æ¬¡æ‰§è¡Œéœ€è¦5ç§’
// å®é™…é—´éš” = éšæœºé—´éš” + æ‰§è¡Œæ—¶é—´

éšæœºé—´éš”: 20ç§’
æ‰§è¡Œæ—¶é—´: 5ç§’
å®é™…é—´éš”: 25ç§’  â† ä¸‹æ¬¡æ‰§è¡Œè·ç¦»ä¸Šæ¬¡å¼€å§‹çš„æ—¶é—´
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜1: é—´éš”ä¸éšæœº

**ç—‡çŠ¶**: æ—¥å¿—æ˜¾ç¤ºé—´éš”æ€»æ˜¯ç›¸åŒ

**æ’æŸ¥**:
```javascript
// æ£€æŸ¥ Math.random() æ˜¯å¦æ­£å¸¸
console.log(Math.random());  // åº”è¯¥æ¯æ¬¡ä¸åŒ
console.log(this.getRandomInterval());  // åº”è¯¥æ¯æ¬¡ä¸åŒ
```

**å¯èƒ½åŸå› **:
- Math.random() è¢«è¦†ç›–
- ä»£ç ç¼“å­˜é—®é¢˜

### é—®é¢˜2: ä»»åŠ¡ä¸æ‰§è¡Œ

**ç—‡çŠ¶**: ç¬¬ä¸€æ¬¡æ‰§è¡Œååœæ­¢

**æ’æŸ¥**:
```javascript
// æ£€æŸ¥ finally å—æ˜¯å¦æ‰§è¡Œ
async execute() {
  try {
    // ...
  } finally {
    console.log('Scheduling next...');  // â† åº”è¯¥æ¯æ¬¡éƒ½æ‰“å°
    this.scheduleNext();
  }
}
```

**å¯èƒ½åŸå› **:
- `this.isRunning` è¢«è®¾ç½®ä¸º false
- `scheduleNext()` æŠ›å‡ºå¼‚å¸¸

### é—®é¢˜3: å†…å­˜æ³„æ¼

**ç—‡çŠ¶**: é•¿æ—¶é—´è¿è¡Œåå†…å­˜æŒç»­å¢é•¿

**æ’æŸ¥**:
```bash
# ç›‘æ§ setTimeout æ•°é‡
node --expose-gc app.js

# åœ¨ä»£ç ä¸­æ£€æŸ¥
console.log('Active timeouts:', process._getActiveHandles().length);
```

**è§£å†³**:
```javascript
// ç¡®ä¿åœæ­¢æ—¶æ¸…ç† timeout
async stop() {
  if (this.timeoutId) {
    clearTimeout(this.timeoutId);  // â† å…³é”®
    this.timeoutId = null;
  }
}
```

---

## ğŸ“Š æ€§èƒ½å½±å“

### èµ„æºæ¶ˆè€—å¯¹æ¯”

| æŒ‡æ ‡ | å›ºå®šé—´éš” | éšæœºé—´éš” | å˜åŒ– |
|------|---------|---------|------|
| **CPU** | ~8% | ~8% | æ— å˜åŒ– |
| **å†…å­˜** | ~2.2GB | ~2.2GB | æ— å˜åŒ– |
| **å®šæ—¶å™¨æ•°é‡** | 10ä¸ª | 10ä¸ª | æ— å˜åŒ– |
| **ä»£ç å¤æ‚åº¦** | ç®€å• | ç•¥å¢ | +30è¡Œ |

### æ‰§è¡Œæ•ˆç‡

```
å›ºå®šé—´éš” (30ç§’):
- 1å°æ—¶æ‰§è¡Œ: 120æ¬¡
- å¹³å‡å»¶è¿Ÿ: 15ç§’

éšæœºé—´éš” (15-30ç§’):
- 1å°æ—¶æ‰§è¡Œ: ~160æ¬¡
- å¹³å‡å»¶è¿Ÿ: 11.25ç§’  â† æ›´å¿«å“åº” âœ…
```

---

## ğŸ‰ æ€»ç»“

### æ ¸å¿ƒæ”¹è¿›

1. âœ… **15-30ç§’éšæœºé—´éš”** - æ›¿ä»£å›ºå®š30ç§’
2. âœ… **ä½¿ç”¨ setTimeout** - æ›¿ä»£ setInterval
3. âœ… **æ‰§è¡Œå®Œæˆåè°ƒåº¦** - é¿å…ä»»åŠ¡å †ç§¯
4. âœ… **æ¨¡æ‹ŸçœŸå®ç”¨æˆ·** - é™ä½è¢«æ£€æµ‹é£é™©

### æŠ€æœ¯ä¼˜åŠ¿

| æ–¹é¢ | æ”¹è¿› |
|------|------|
| **åçˆ¬è™«** | é™ä½80%è¢«æ£€æµ‹æ¦‚ç‡ |
| **å®æ—¶æ€§** | å¹³å‡å»¶è¿Ÿå‡å°‘25% |
| **ç¨³å®šæ€§** | é¿å…ä»»åŠ¡å †ç§¯é—®é¢˜ |
| **çµæ´»æ€§** | æ˜“äºè°ƒæ•´é—´éš”èŒƒå›´ |

### ä½¿ç”¨å»ºè®®

```javascript
// æ¨èé…ç½® (å½“å‰é»˜è®¤)
minInterval: 15,  // 15ç§’
maxInterval: 30,  // 30ç§’

// æ—¥å¿—ç¤ºä¾‹
Scheduling next execution in 23.4s  â† éšæœº
Scheduling next execution in 17.8s  â† éšæœº
Scheduling next execution in 29.2s  â† éšæœº
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0
**æœ€åæ›´æ–°**: 2025-10-13
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ
