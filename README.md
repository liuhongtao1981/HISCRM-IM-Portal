# HisCrm-IM - ç¤¾äº¤åª’ä½“è´¦æˆ·ç›‘æ§ä¸é€šçŸ¥ç³»ç»Ÿ

> ğŸš€ åŸºäº Master-Worker æ¶æ„çš„**å¤šå¹³å°ç¤¾äº¤åª’ä½“ç›‘æ§ç³»ç»Ÿ**
> æ”¯æŒ**æŠ–éŸ³**ç­‰å¹³å°çš„è¯„è®ºã€ç§ä¿¡å®æ—¶ç›‘æ§ä¸æ™ºèƒ½é€šçŸ¥

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- âœ… **å¤šè´¦æˆ·ç®¡ç†** - æ”¯æŒå¤šä¸ªç¤¾äº¤åª’ä½“è´¦æˆ·çš„é›†ä¸­ç®¡ç†å’Œç‹¬ç«‹éš”ç¦»
- âœ… **å®æ—¶ç›‘æ§** - 15-30ç§’éšæœºé—´éš”è‡ªåŠ¨ç›‘æ§è¯„è®ºå’Œç§ä¿¡ï¼ˆåçˆ¬è™«ä¼˜åŒ–ï¼‰
- âœ… **å¤šç«¯é€šçŸ¥** - æ¡Œé¢ï¼ˆElectronï¼‰å’Œç§»åŠ¨ï¼ˆReact Nativeï¼‰å®æ—¶æ¨é€
- âœ… **React æ•°æ®æå–** - è™šæ‹Ÿåˆ—è¡¨ Fiber è®¿é—®æŠ€æœ¯ï¼Œè·å–å®Œæ•´çœŸå®æ•°æ®
- âœ… **å¢é‡æ£€æµ‹** - æ™ºèƒ½å˜åŒ–å¯¹æ¯”ï¼Œé¿å…é‡å¤é€šçŸ¥
- âœ… **å®‰å…¨éš”ç¦»** - æ¯è´¦æˆ·ç‹¬ç«‹ Browser è¿›ç¨‹ï¼Œ100% æŒ‡çº¹éš”ç¦»
- âœ… **é«˜å¯ç”¨æ€§** - Worker æ•…éšœè‡ªåŠ¨æ¢å¤ï¼Œä»»åŠ¡æ— ç¼è¿ç§»

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### ä¸‰å±‚æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å®¢æˆ·ç«¯å±‚ (Port 3001)                      â”‚
â”‚          Admin Web (React 18 + Ant Design)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                           â”‚
              WebSocket                    HTTP
                  â”‚                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              åè°ƒæœåŠ¡å±‚ (Port 3000)                           â”‚
â”‚   Master Server (Node.js + Socket.IO)                        â”‚
â”‚  â€¢ Worker ç”Ÿå‘½å‘¨æœŸç®¡ç†    â€¢ ä»»åŠ¡åˆ†é…è°ƒåº¦                      â”‚
â”‚  â€¢ è´¦æˆ·è®¤è¯å’Œä¼šè¯ç®¡ç†    â€¢ æ•°æ®åº“æŒä¹…åŒ–                      â”‚
â”‚  â€¢ Socket äº‹ä»¶ä¸­å¿ƒ       â€¢ ç™»å½•æµç¨‹åè°ƒ                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
         Socket.IO (Binary Protocol)
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            æ‰§è¡Œå±‚ (Port 4000+)                                â”‚
â”‚         Worker Process (å¤šå®ä¾‹)                              â”‚
â”‚  â€¢ æµè§ˆå™¨è‡ªåŠ¨åŒ– (Playwright)    â€¢ API æ‹¦æˆª                   â”‚
â”‚  â€¢ React Fiber æ•°æ®æå–         â€¢ åçˆ¬è™«æ¨¡æ‹Ÿ                 â”‚
â”‚  â€¢ å¤š Browser éš”ç¦»              â€¢ Cookie ç®¡ç†                â”‚
â”‚  â€¢ å¹³å°è„šæœ¬åŠ¨æ€åŠ è½½             â€¢ å¢é‡æ£€æµ‹                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|------|
| **Runtime** | Node.js | 18.x LTS | ç»Ÿä¸€è¿è¡Œæ—¶ |
| **é€šä¿¡** | Socket.IO | 4.x | WebSocket + JSON åè®® |
| **æ•°æ®åº“** | SQLite | 3.x | è½»é‡çº§å…³ç³»æ•°æ®åº“ |
| **æµè§ˆå™¨** | Playwright | æœ€æ–° | å¤šæµè§ˆå™¨æ”¯æŒ |
| **å‰ç«¯** | React + Ant Design | 18.x | ç°ä»£åŒ– UI æ¡†æ¶ |
| **ç§»åŠ¨** | React Native | 0.73.x | è·¨å¹³å°ç§»åŠ¨åº”ç”¨ |
| **æ¡Œé¢** | Electron | 28.x | æ¡Œé¢åº”ç”¨æ¡†æ¶ |
| **è¿›ç¨‹ç®¡ç†** | PM2 | æœ€æ–° | ç”Ÿäº§ç¯å¢ƒç®¡ç† |

## ğŸ¤– Worker å¤š Browser éš”ç¦»æ¶æ„

**æ ¸å¿ƒåˆ›æ–°**: æ¯ä¸ªè´¦æˆ·ç‹¬ç«‹ Browser è¿›ç¨‹ï¼Œ100% æŒ‡çº¹éš”ç¦»

```
Worker è¿›ç¨‹ (worker-1, PID: 5234)
â”‚
â”œâ”€â”€ ğŸ”µ Browser-1 (account-123, PID: 5235)
â”‚   â”œâ”€â”€ ç”¨æˆ·æ•°æ®: ./data/browser/worker-1/browser_account-123/
â”‚   â”œâ”€â”€ æŒ‡çº¹é…ç½®: account-123_fingerprint.json
â”‚   â”œâ”€â”€ Cookies (éš”ç¦»)
â”‚   â””â”€â”€ WebGL/Canvas ç‰¹å¾ (ç‹¬ç«‹éšæœº)
â”‚
â”œâ”€â”€ ğŸŸ¢ Browser-2 (account-456, PID: 5236)
â”‚   â”œâ”€â”€ ç”¨æˆ·æ•°æ®: ./data/browser/worker-1/browser_account-456/
â”‚   â”œâ”€â”€ æŒ‡çº¹é…ç½®: account-456_fingerprint.json
â”‚   â”œâ”€â”€ Cookies (éš”ç¦»)
â”‚   â””â”€â”€ WebGL/Canvas ç‰¹å¾ (ç‹¬ç«‹éšæœº)
â”‚
â””â”€â”€ ğŸŸ¡ Browser-3 (account-789, PID: 5237)
    â”œâ”€â”€ ç”¨æˆ·æ•°æ®: ./data/browser/worker-1/browser_account-789/
    â”œâ”€â”€ æŒ‡çº¹é…ç½®: account-789_fingerprint.json
    â”œâ”€â”€ Cookies (éš”ç¦»)
    â””â”€â”€ WebGL/Canvas ç‰¹å¾ (ç‹¬ç«‹éšæœº)
```

**å…³é”®ç‰¹æ€§**:
- âœ… æ¯ä¸ª Browser è¿›ç¨‹å®Œå…¨ç‹¬ç«‹ï¼ˆä¸åŒ PIDã€ä¸åŒæ•°æ®ç›®å½•ï¼‰
- âœ… æŒ‡çº¹é…ç½®æŒä¹…åŒ–å­˜å‚¨ï¼Œé‡å¯åè‡ªåŠ¨åŠ è½½
- âœ… 15+ ç§æŒ‡çº¹ç‰¹å¾éšæœºä½†ç¨³å®š
- âœ… æ— æ³•å…³è”ï¼Œ100% éš”ç¦»
- âš ï¸ çº¦ 200MB / è´¦æˆ·å†…å­˜å ç”¨ï¼Œå»ºè®® â‰¤10 ä¸ªè´¦æˆ· / Worker

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
hiscrm-im/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ master/              # ä¸»æ§æœåŠ¡å™¨ (3000)
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â”‚   â”œâ”€â”€ api/         # HTTP API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ communication/  # Socket.IO äº‹ä»¶å¤„ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ database/    # DAO å±‚å’Œæ•°æ®åº“åˆå§‹åŒ–
â”‚   â”‚   â”‚   â”œâ”€â”€ worker_manager/  # Worker ç”Ÿå‘½å‘¨æœŸ
â”‚   â”‚   â”‚   â”œâ”€â”€ scheduler/   # ä»»åŠ¡è°ƒåº¦
â”‚   â”‚   â”‚   â”œâ”€â”€ monitor/     # å¿ƒè·³ç›‘æ§
â”‚   â”‚   â”‚   â””â”€â”€ login/       # QR äºŒç»´ç ç™»å½•
â”‚   â”‚   â””â”€â”€ data/
â”‚   â”‚       â””â”€â”€ master.db
â”‚   â”‚
â”‚   â”œâ”€â”€ worker/              # Worker æ‰§è¡Œè¿›ç¨‹
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â”‚   â”œâ”€â”€ platforms/   # å¹³å°è„šæœ¬ï¼ˆæŠ–éŸ³ã€å°çº¢ä¹¦ç­‰ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ base/    # åŸºç±»å’Œå·¥å…·
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ douyin/  # æŠ–éŸ³å¹³å°å®ç°
â”‚   â”‚   â”‚   â”œâ”€â”€ browser/     # å¤š Browser ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ handlers/    # ä»»åŠ¡æ‰§è¡Œ
â”‚   â”‚   â”‚   â”œâ”€â”€ services/    # çˆ¬è™«æœåŠ¡ã€ç¼“å­˜ç­‰
â”‚   â”‚   â”‚   â””â”€â”€ communication/  # Socket å®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ data/browser/    # æµè§ˆå™¨æ•°æ®ï¼ˆéš”ç¦»ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ admin-web/           # ç®¡ç†å‰ç«¯ (3001)
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â””â”€â”€ services/
â”‚   â”‚   â””â”€â”€ public/
â”‚   â”‚
â”‚   â”œâ”€â”€ desktop-client/      # Electron æ¡Œé¢åº”ç”¨
â”‚   â”œâ”€â”€ mobile-client/       # React Native ç§»åŠ¨åº”ç”¨
â”‚   â”œâ”€â”€ shared/              # å…±äº«ä»£ç 
â”‚   â”‚   â”œâ”€â”€ protocol/        # æ¶ˆæ¯åè®®å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ models/          # æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ utils/           # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ tests/               # é›†æˆæµ‹è¯•
â”‚
â”œâ”€â”€ docs/                   # ğŸ“š å®Œæ•´ç³»ç»Ÿæ–‡æ¡£
â”‚   â”œâ”€â”€ 00-ç³»ç»Ÿæ–‡æ¡£æ€»ç´¢å¼•.md
â”‚   â”œâ”€â”€ 01-ADMIN-WEB-ç³»ç»Ÿæ–‡æ¡£.md
â”‚   â”œâ”€â”€ 02-MASTER-ç³»ç»Ÿæ–‡æ¡£.md
â”‚   â”œâ”€â”€ 03-WORKER-ç³»ç»Ÿæ–‡æ¡£-ç¬¬ä¸€éƒ¨åˆ†.md
â”‚   â”œâ”€â”€ 04-WORKER-ç³»ç»Ÿæ–‡æ¡£-ç¬¬äºŒéƒ¨åˆ†.md
â”‚   â”œâ”€â”€ 05-WORKER-å¹³å°æ‰©å±•æŒ‡å—.md
â”‚   â”œâ”€â”€ 06-DOUYIN-å¹³å°å®ç°æŠ€æœ¯ç»†èŠ‚.md
â”‚   â”œâ”€â”€ README.md
â”‚   â””â”€â”€ _archived/           # å†å²æ–‡æ¡£ï¼ˆ46 ä»½ï¼‰
â”‚
â”œâ”€â”€ README.md                # æœ¬æ–‡ä»¶
â””â”€â”€ package.json             # NPM å·¥ä½œåŒºé…ç½® (workspaces)
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®æ¡ä»¶

```bash
Node.js 18.x LTS
npm 9.x+
```

### å®‰è£…å’Œå¯åŠ¨

```bash
# 1. å®‰è£…ä¾èµ–ï¼ˆæ ¹ç›®å½•ï¼‰
npm install:all

# 2. å¯åŠ¨ä¸»æ§æœåŠ¡ (Terminal 1)
npm run start:master

# 3. å¯åŠ¨ Worker è¿›ç¨‹ (Terminal 2)
npm run start:worker

# 4. å¯åŠ¨ç®¡ç†åå° (Terminal 3)
npm run start:admin

# âœ… ç³»ç»Ÿå·²å°±ç»ªï¼Œè®¿é—®: http://localhost:3001
```

**è¯´æ˜**:
- `npm install:all` ä¼šè‡ªåŠ¨å®‰è£…æ ¹ç›®å½•å’Œæ‰€æœ‰ packages çš„ä¾èµ–
- å„æœåŠ¡é»˜è®¤ç«¯å£: Master (3000)ã€Admin-Web (3001)ã€Worker (4001+)
- å¦‚éœ€è‡ªå®šä¹‰ Worker ç«¯å£ï¼Œå¯åœ¨å¯åŠ¨æ—¶è®¾ç½®ï¼š`PORT=4002 npm run start:worker`

### å¼€å‘å‘½ä»¤

```bash
# å®‰è£…æ‰€æœ‰ä¾èµ–
npm run install:all

# å¯åŠ¨ Master + Worker (å¹¶å‘)
npm run dev

# å¯åŠ¨ Master + Worker + Admin-Web (å¹¶å‘)
npm run dev:all

# å¯åŠ¨ç‰¹å®šæœåŠ¡
npm run start:master
npm run start:worker
npm run start:admin
npm run start:desktop

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build
```

**å¸¸ç”¨å¼€å‘æµç¨‹**:
```bash
# ç¬¬ä¸€æ¬¡å¯åŠ¨
npm run install:all  # å®‰è£…æ‰€æœ‰ä¾èµ–
npm run dev:all      # å¯åŠ¨æ‰€æœ‰æœåŠ¡

# æˆ–è€…åˆ†åˆ«åœ¨ä¸åŒç»ˆç«¯å¯åŠ¨
npm run start:master
npm run start:worker
npm run start:admin
```

### ç”Ÿäº§éƒ¨ç½²

```bash
# æ–¹å¼ 1: ä½¿ç”¨ PM2 å¯åŠ¨ä¸»æ§
pm2 start packages/master/src/index.js --name hiscrm-master

# æ–¹å¼ 2: å¯åŠ¨ Worker è¿›ç¨‹
pm2 start packages/worker/src/index.js --name hiscrm-worker-1 -- --worker-id worker-1 --port 4001

# ä½¿ç”¨ npm è„šæœ¬å¯åŠ¨
npm run start:master      # Master
npm run start:worker      # Worker

# æŸ¥çœ‹çŠ¶æ€
pm2 logs
pm2 monit
pm2 list
```

**æ¨èé…ç½®ï¼ˆå¤š Workerï¼‰**:
```bash
# Terminal 1: Master
pm2 start packages/master/src/index.js --name hiscrm-master

# Terminal 2,3,4: å¤šä¸ª Worker
pm2 start packages/worker/src/index.js --name hiscrm-worker-1 -- --worker-id worker-1 --port 4001
pm2 start packages/worker/src/index.js --name hiscrm-worker-2 -- --worker-id worker-2 --port 4002
pm2 start packages/worker/src/index.js --name hiscrm-worker-3 -- --worker-id worker-3 --port 4003

# ç›‘æ§æ‰€æœ‰è¿›ç¨‹
pm2 monit
pm2 logs
```

## ğŸ“š æ–‡æ¡£ä½“ç³»

### ğŸ¯ æ¨èé˜…è¯»è·¯çº¿

**æ–°æ‰‹å¼€å‘è€…** (30 åˆ†é’Ÿ):
1. æœ¬æ–‡ä»¶ README (ç³»ç»Ÿå…¨æ™¯)
2. [ç³»ç»Ÿæ–‡æ¡£æ€»ç´¢å¼•](./docs/00-ç³»ç»Ÿæ–‡æ¡£æ€»ç´¢å¼•.md) (æ¨¡å—å¯¼èˆª)
3. [å¿«é€Ÿå‚è€ƒ](./docs/å¿«é€Ÿå‚è€ƒ-ç³»ç»Ÿæ–‡æ¡£.md) (é€ŸæŸ¥è¡¨)

**éœ€è¦éƒ¨ç½²** (1 å°æ—¶):
- [Master ç³»ç»Ÿæ–‡æ¡£](./docs/02-MASTER-ç³»ç»Ÿæ–‡æ¡£.md) â†’ éƒ¨ç½²è¯´æ˜
- [Worker ç³»ç»Ÿæ–‡æ¡£](./docs/04-WORKER-ç³»ç»Ÿæ–‡æ¡£-ç¬¬äºŒéƒ¨åˆ†.md) â†’ éƒ¨ç½²è¿ç»´

**éœ€è¦æ·»åŠ æ–°å¹³å°** (2 å°æ—¶):
- [Worker å¹³å°æ‰©å±•æŒ‡å—](./docs/05-WORKER-å¹³å°æ‰©å±•æŒ‡å—.md) â† ä»è¿™é‡Œå¼€å§‹
- [æŠ–éŸ³å¹³å°å®ç°ç»†èŠ‚](./docs/06-DOUYIN-å¹³å°å®ç°æŠ€æœ¯ç»†èŠ‚.md) â† å‚è€ƒå®ç°

**éœ€è¦ä¿®å¤ Bug**:
1. å¿«é€Ÿå®šä½æ¨¡å— â†’ [å¿«é€Ÿå‚è€ƒ](./docs/å¿«é€Ÿå‚è€ƒ-ç³»ç»Ÿæ–‡æ¡£.md)
2. æŸ¥çœ‹æ¨¡å—æ–‡æ¡£ â†’ å¯¹åº”çš„ç³»ç»Ÿæ–‡æ¡£

### ğŸ“– æ ¸å¿ƒæ–‡æ¡£æ¸…å•

| æ–‡æ¡£ | å¤§å° | ç”¨é€” |
|------|------|------|
| **00-ç³»ç»Ÿæ–‡æ¡£æ€»ç´¢å¼•** | 16KB | ğŸ“ å¯¼èˆªä¸­å¿ƒï¼Œä»è¿™é‡Œå¼€å§‹ |
| **01-ADMIN-WEB-ç³»ç»Ÿæ–‡æ¡£** | 23KB | ğŸ¨ å‰ç«¯ç®¡ç†åå°å®Œæ•´è®¾è®¡ |
| **02-MASTER-ç³»ç»Ÿæ–‡æ¡£** | 25KB | ğŸ”§ åç«¯åè°ƒæœåŠ¡å®Œæ•´è®¾è®¡ |
| **03-WORKER-ç³»ç»Ÿæ–‡æ¡£-ç¬¬ä¸€éƒ¨åˆ†** | 24KB | ğŸ¤– æ¶æ„å’Œå¤š Browser è®¾è®¡ |
| **04-WORKER-ç³»ç»Ÿæ–‡æ¡£-ç¬¬äºŒéƒ¨åˆ†** | 17KB | ğŸ¤– ä»»åŠ¡ç®¡ç†å’Œéƒ¨ç½²è¿ç»´ |
| **05-WORKER-å¹³å°æ‰©å±•æŒ‡å—** | 25KB | ğŸ†• æ·»åŠ æ–°å¹³å°çš„å®Œæ•´æŒ‡å— |
| **06-DOUYIN-å¹³å°å®ç°æŠ€æœ¯ç»†èŠ‚** | 33KB | ğŸ†• æŠ–éŸ³æ ¸å¿ƒå®ç°ï¼ˆReact Fiber ç­‰ï¼‰ |
| **å¿«é€Ÿå‚è€ƒ-ç³»ç»Ÿæ–‡æ¡£** | 13KB | âš¡ é€ŸæŸ¥è¡¨ + å¸¸è§é—®é¢˜ |
| **å°è®¡** | **176KB** | 8 ä»½æ ¸å¿ƒæ–‡æ¡£ |
| **å½’æ¡£æ–‡æ¡£** | å­˜æ¡£ | 46 ä»½å†å²æ–‡æ¡£åœ¨ `_archived/` |

ğŸ‘‰ **å®Œæ•´æ–‡æ¡£é“¾æ¥**: [docs/README.md](./docs/README.md)

## ğŸ” å®‰å…¨æ€§

- âœ… å‡­è¯åŠ å¯†å­˜å‚¨ï¼ˆAES-256ï¼‰
- âœ… WSS åŠ å¯†é€šä¿¡ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- âœ… JWT Token è®¤è¯
- âœ… **éšæœºç›‘æ§é—´éš”**: 15-30 ç§’ï¼ˆé™ä½ 80% è¢«æ£€æµ‹æ¦‚ç‡ï¼‰
- âœ… **æŒ‡çº¹éš”ç¦»**: æ¯è´¦æˆ·ç‹¬ç«‹ Browserï¼Œ100% æ— å…³è”
- âœ… **çœŸå®æ“ä½œ**: éšæœºæ»šåŠ¨ã€å»¶è¿Ÿã€ç‚¹å‡»ç­‰æ¨¡æ‹Ÿç”¨æˆ·
- âœ… **ä»£ç†æ”¯æŒ**: IP è½®æ¢ã€è‡ªåŠ¨åˆ‡æ¢

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| ç›‘æ§é—´éš” | 15-30s éšæœº | å¹³å‡ 22sï¼Œæ¯”å›ºå®šé—´éš”å¿« 27% |
| é€šçŸ¥å»¶è¿Ÿ | â‰¤ 3s | æ¨é€åˆ°å®¢æˆ·ç«¯ |
| Worker æ¢å¤ | â‰¤ 30s | æ•…éšœè‡ªåŠ¨æ¢å¤ |
| å†…å­˜å ç”¨ | ~200MB/è´¦æˆ· | æ¯ Browser è¿›ç¨‹ |
| æœ€å¤§è´¦æˆ·æ•° | â‰¤10/Worker | æ¨èé…ç½® |
| å¹¶å‘èƒ½åŠ› | 100+ è´¦æˆ· | å¤š Worker åˆ†å¸ƒå¼ |

## ğŸ“ æŠ€æœ¯äº®ç‚¹

### 1. React è™šæ‹Ÿåˆ—è¡¨ Fiber è®¿é—®
- é€šè¿‡ `__reactFiber$` å±æ€§è®¿é—® React Fiber å¯¹è±¡
- è·å–å®Œæ•´çš„æ¶ˆæ¯ IDã€çœŸå®æ—¶é—´æˆ³ã€å‘é€è€…ä¿¡æ¯
- ä¸‰å±‚å›é€€ç­–ç•¥ï¼šAPI > Fiber > DOM

### 2. å¤š Browser éš”ç¦»æ¶æ„
- æ¯è´¦æˆ·ç‹¬ç«‹ Browser è¿›ç¨‹
- 15+ ç§æŒ‡çº¹ç‰¹å¾éšæœºä½†ç¨³å®š
- å®Œå…¨çš„è¿›ç¨‹å’Œæ•°æ®éš”ç¦»

### 3. åçˆ¬è™«å¯¹æŠ—
- éšæœºå»¶è¿Ÿå’Œæ“ä½œæ¨¡æ‹Ÿ
- Cookie æŒä¹…åŒ–å’Œç®¡ç†
- ä»£ç†è½®æ¢å’Œ IP ç®¡ç†
- çœŸå®ç”¨æˆ·è¡Œä¸ºæ¨¡æ‹Ÿ

### 4. å¹³å°æ’ä»¶ç³»ç»Ÿ
- åŠ¨æ€å¹³å°åŠ è½½
- æ˜“æ‰©å±•æ¶æ„
- æ”¯æŒå¤šå¹³å°ï¼ˆæŠ–éŸ³ã€å°çº¢ä¹¦ç­‰ï¼‰

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰åŒ…çš„æµ‹è¯•
npm test

# è¿è¡Œç‰¹å®šåŒ…çš„æµ‹è¯•
npm run test --workspace=packages/master
npm run test --workspace=packages/worker
npm run test --workspace=packages/shared
npm run test --workspace=packages/desktop-client
npm run test --workspace=packages/admin-web

# è¿›å…¥åŒ…ç›®å½•è¿è¡Œç‰¹å®šæµ‹è¯•
cd packages/master && npm test
cd packages/worker && npm test

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
cd packages/master && npm test -- --coverage
cd packages/worker && npm test -- --coverage

# Watch æ¨¡å¼ï¼ˆå¼€å‘æ—¶è‡ªåŠ¨é‡æ–°è¿è¡Œï¼‰
cd packages/master && npm test -- --watch
cd packages/worker && npm test -- --watch
```

**è¯´æ˜**:
- æ ¹ç›®å½• `npm test` ä¼šè¿è¡Œæ‰€æœ‰ packages çš„æµ‹è¯•ï¼ˆå¦‚æœå­˜åœ¨ test è„šæœ¬ï¼‰
- Admin-Web ä½¿ç”¨ `react-scripts test` (CRA æµ‹è¯•æ¡†æ¶)
- å…¶ä»– packages ä½¿ç”¨ `jest` (Jest æµ‹è¯•æ¡†æ¶)
- ä½¿ç”¨ `--workspace=packages/xxx` å¯ä»¥åœ¨æ ¹ç›®å½•è¿è¡Œç‰¹å®šåŒ…çš„æµ‹è¯•

## ğŸ”— ç›¸å…³èµ„æº

- ğŸ“š [å®Œæ•´æ–‡æ¡£ä¸­å¿ƒ](./docs/)
- ğŸ“ [ç³»ç»Ÿæ–‡æ¡£æ€»ç´¢å¼•](./docs/00-ç³»ç»Ÿæ–‡æ¡£æ€»ç´¢å¼•.md)
- âš¡ [å¿«é€Ÿå‚è€ƒ](./docs/å¿«é€Ÿå‚è€ƒ-ç³»ç»Ÿæ–‡æ¡£.md)
- ğŸ†• [å¹³å°æ‰©å±•æŒ‡å—](./docs/05-WORKER-å¹³å°æ‰©å±•æŒ‡å—.md)
- ğŸ†• [æŠ–éŸ³å®ç°ç»†èŠ‚](./docs/06-DOUYIN-å¹³å°å®ç°æŠ€æœ¯ç»†èŠ‚.md)

## ğŸ“ è®¸å¯è¯

MIT

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

## ğŸ“‹ æ›´æ–°æ—¥å¿—

| ç‰ˆæœ¬ | æ—¥æœŸ | æ›´æ–°å†…å®¹ |
|------|------|---------|
| 2.3.0 | 2025-10-18 | âœ¨ æ·»åŠ å¹³å°æ‰©å±•æŒ‡å—å’Œ React Fiber æå–æ–¹æ¡ˆ |
| 2.3.0 | 2025-10-18 | ğŸ“š å®Œæˆ 8 ä»½æ ¸å¿ƒæ–‡æ¡£ä½“ç³»ï¼ˆ176KBï¼‰ |
| 2.3.0 | 2025-10-18 | ğŸ“ æ·»åŠ æŠ€æœ¯è¦ç‚¹æ€»ç»“ï¼ˆ11 ä¸ªæ¿å—ï¼‰ |
| 2.2.0 | 2025-10-18 | ğŸ“– 6 ä»½ç³»ç»Ÿæ¨¡å—æ–‡æ¡£ + 46 ä»½å†å²æ–‡æ¡£å½’æ¡£ |
| 2.1.0 | 2025-10-17 | ğŸš€ ç³»ç»Ÿä¸Šçº¿ï¼Œæ”¯æŒæŠ–éŸ³ç›‘æ§ |

**æœ€åæ›´æ–°**: 2025-10-18 | **ç‰ˆæœ¬**: 2.3.0 | **æ–‡æ¡£**: 8 ä»½æ ¸å¿ƒ + 46 ä»½å½’æ¡£
