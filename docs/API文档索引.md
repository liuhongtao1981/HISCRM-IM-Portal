# API 文档索引

**快速导航**: 找到你需要的 API 文档

**更新时间**: 2025-10-23

---

## 📚 四份核心文档

### 1️⃣ [原版IM-API清单.md](./原版IM-API清单.md)
**用途**: 了解原版IM有哪些功能

**包含内容**:
- 24 个原版 IM API 的完整定义
- 每个 API 的请求/响应示例
- 关键功能说明 (时间单位、消息类型等)
- Master 实现状态标记

**何时查看**:
- ✓ 想了解原版 IM 的功能
- ✓ 需要原版 API 的请求/响应格式
- ✓ 对比某个接口的完整定义

**快速链接**:
- [账户管理接口 (6个)](./原版IM-API清单.md#一账户管理接口-6-个)
- [会话/对话接口 (4个)](./原版IM-API清单.md#二会话对话接口-4-个)
- [消息查询接口 (6个)](./原版IM-API清单.md#三消息查询接口-6-个)
- [消息操作接口 (5个)](./原版IM-API清单.md#四消息操作接口-5-个)
- [用户管理接口 (3个)](./原版IM-API清单.md#五用户管理接口-3-个)

---

### 2️⃣ [Master-API现有清单.md](./Master-API现有清单.md)
**用途**: 了解 Master 现在有哪些功能

**包含内容**:
- 50+ 个 Master API 的完整清单
- 9 个模块的接口列表
- 每个接口的 HTTP 方法、路径、参数说明
- 与原版 IM 的完整度对比

**何时查看**:
- ✓ 想知道 Master 现在有什么 API
- ✓ 需要 Master API 的具体端点和参数
- ✓ 检查某个功能是否已实现

**快速链接**:
- [账户管理接口 (6个)](./Master-API现有清单.md#一账户管理接口-6-个-)
- [消息相关接口 (4个)](./Master-API现有清单.md#二消息相关接口-4-个-)
- [回复功能接口 (4个)](./Master-API现有清单.md#三回复功能接口-4-个-)
- [Worker 相关接口 (11个)](./Master-API现有清单.md#四worker-相关接口-11-个-)
- [代理管理接口 (6个)](./Master-API现有清单.md#六代理管理接口-6-个-)
- [平台管理接口 (3个)](./Master-API现有清单.md#七平台管理接口-3-个-)

---

### 3️⃣ [API对比-快速参考表.md](./API对比-快速参考表.md) ⭐ **推荐**
**用途**: 快速查看原版 IM 和 Master 的对标情况

**包含内容**:
- 24 个接口的对标表格 (原版 vs Master)
- 工作量估计 (多少小时实现)
- 优先级分组 (P1/P2/P3)
- 实现路线图

**何时查看**:
- ✓ 快速查看某个功能 Master 有没有
- ✓ 了解需要多少工作量
- ✓ 看实现优先级和路线图

**表格速查**:
- [账户管理 (6/6 ✅ 100%)](./API对比-快速参考表.md#账户管理-66--100)
- [会话查询 (1/4 ⚠️ 25%)](./API对比-快速参考表.md#会话查询-14--25)
- [消息查询 (2/6 ⚠️ 33%)](./API对比-快速参考表.md#消息查询-26--33)
- [消息操作 (1/5 ⚠️ 20%)](./API对比-快速参考表.md#消息操作-15--20)
- [用户管理 (0/3 ❌ 0%)](./API对比-快速参考表.md#用户管理-03--0)

---

### 4️⃣ [API对比总结-原版IM-vs-Master.md](./API对比总结-原版IM-vs-Master.md)
**用途**: 深度分析原版 IM 和 Master 的差异

**包含内容**:
- 详细的差异分析
- 关键差异说明 (协议、时间、数据模型)
- 完整的实施建议
- 转换指南 (时间单位、分页方式等)

**何时查看**:
- ✓ 需要深入理解两个系统的差异
- ✓ 想了解为什么某个接口需要改进
- ✓ 需要转换/适配的技术细节

**详细内容**:
- [快速对比部分](./API对比总结-原版IM-vs-Master.md#一快速对比)
- [详细对标部分](./API对比总结-原版IM-vs-Master.md#二详细对标)
- [关键差异分析](./API对比总结-原版IM-vs-Master.md#三关键差异)
- [实现优先级](./API对比总结-原版IM-vs-Master.md#四实现优先级)

---

## 📖 其他参考文档

| 文档 | 用途 | 规模 |
|------|------|------|
| [13-Master缺失接口精准对比.md](./13-Master缺失接口精准对比.md) | 缺失接口详细说明 + 实现代码框架 | 20KB |
| [12-原版IM和Master概念对照.md](./12-原版IM和Master概念对照.md) | 两个系统的概念映射 (user/conversation/message) | 22KB |
| [11-Master需要实现的功能清单.md](./11-Master需要实现的功能清单.md) | 为支持 crm-pc-im 需要的功能 | 19KB |
| [10-DOUYIN-IM-API清单及Master对比.md](./_archived_api_docs/10-DOUYIN-IM-API清单及Master对比.md) | 旧版本的完整对比清单 | 18KB |

---

## 🎯 快速查询指南

### "某个功能 Master 有吗？"

**答案来源**: [API对比-快速参考表.md](./API对比-快速参考表.md)

操作步骤:
1. 打开"接口对标速查表"部分
2. 查找功能名称
3. 看"状态"列:
   - ✅ 完全匹配 = 有，完全一样
   - ⚠️ 部分 = 有，但需改进
   - ❌ 缺失 = 没有

---

### "这个功能要花多久实现？"

**答案来源**: [API对比-快速参考表.md](./API对比-快速参考表.md) 或 [13-Master缺失接口精准对比.md](./13-Master缺失接口精准对比.md)

操作步骤:
1. 找到对应功能行
2. 看"工作"或"工作量"列:
   - 0h = 已完成
   - 2-4h = 小任务
   - 6h = 中等任务
   - 8h = 大任务

---

### "我想从哪里开始实现？"

**答案来源**: [API对比-快速参考表.md#按优先级的实现路线](./API对比-快速参考表.md#按优先级的实现路线)

建议顺序:
1. **第一阶段**: 改进现有接口 (20h)
   - 会话列表改进
   - 消息历史改进
   - 标记已读改进
   - 发送消息 HTTP API

2. **第二阶段**: 新增核心接口 (30h)
   - 会话详情、搜索
   - 消息搜索
   - 用户管理

3. **第三阶段**: 高级功能 (28h)
   - 会话置顶/静音
   - 消息编辑/删除
   - 可选功能

---

### "原版 API 的请求/响应格式是什么？"

**答案来源**: [原版IM-API清单.md](./原版IM-API清单.md)

操作步骤:
1. 打开文档
2. 找到对应的 API 编号 (1-24)
3. 查看"请求"和"返回"部分的 JSON 示例

---

### "时间戳、分页等数据怎么转换？"

**答案来源**: [API对比总结-原版IM-vs-Master.md#五关键差异](./API对比总结-原版IM-vs-Master.md#三关键差异)

包含的转换:
- 时间单位 (秒 ↔ 毫秒)
- 分页方式 (cursor ↔ offset/limit)
- 会话 ID 格式
- 数据模型映射

---

## 📊 文档大小和阅读时间

| 文档 | 大小 | 估计阅读时间 | 难度 |
|------|------|------------|------|
| API对比-快速参考表.md | 8KB | 5-10 分钟 | ⭐ 简单 |
| Master-API现有清单.md | 12KB | 10-15 分钟 | ⭐ 简单 |
| 原版IM-API清单.md | 13KB | 10-15 分钟 | ⭐ 简单 |
| API对比总结-原版IM-vs-Master.md | 11KB | 15-20 分钟 | ⭐⭐ 中等 |
| 13-Master缺失接口精准对比.md | 20KB | 20-30 分钟 | ⭐⭐ 中等 |
| 12-原版IM和Master概念对照.md | 22KB | 20-30 分钟 | ⭐⭐ 中等 |

---

## 📚 阅读建议

### 第一次了解这个项目

推荐顺序:
1. **2 分钟**: 这个索引文档 (你正在看)
2. **5 分钟**: [API对比-快速参考表.md](./API对比-快速参考表.md) - 了解大图
3. **10 分钟**: [Master-API现有清单.md](./Master-API现有清单.md) - 了解 Master 有什么
4. **10 分钟**: [原版IM-API清单.md](./原版IM-API清单.md) - 了解需要什么

**总计 25 分钟** → 对项目有基本了解

---

### 需要开始实现

推荐顺序:
1. **5 分钟**: [API对比-快速参考表.md#按优先级的实现路线](./API对比-快速参考表.md#按优先级的实现路线) - 看实现路线
2. **20 分钟**: [13-Master缺失接口精准对比.md](./13-Master缺失接口精准对比.md) - 看详细说明和代码框架
3. **参考**: [原版IM-API清单.md](./原版IM-API清单.md) - 核对请求/响应格式

**总计 25 分钟 + 开始编码**

---

### 需要深度分析

推荐顺序:
1. **5 分钟**: [API对比-快速参考表.md](./API对比-快速参考表.md) - 快速对比
2. **20 分钟**: [API对比总结-原版IM-vs-Master.md](./API对比总结-原版IM-vs-Master.md) - 详细分析
3. **10 分钟**: [12-原版IM和Master概念对照.md](./12-原版IM和Master概念对照.md) - 概念映射

**总计 35 分钟** → 对两个系统有深入理解

---

## 🔍 按功能快速定位

### 账户/用户功能
- 📄 [原版IM-API清单.md#一账户管理接口](./原版IM-API清单.md#一账户管理接口-6-个)
- 📄 [原版IM-API清单.md#五用户管理接口](./原版IM-API清单.md#五用户管理接口-3-个)
- 📄 [Master-API现有清单.md#一账户管理接口](./Master-API现有清单.md#一账户管理接口-6-个-)

### 会话/对话功能
- 📄 [原版IM-API清单.md#二会话对话接口](./原版IM-API清单.md#二会话对话接口-4-个)
- 📄 [API对比-快速参考表.md#会话查询](./API对比-快速参考表.md#会话查询-14--25)
- 📄 [13-Master缺失接口精准对比.md#二会话查询接口](./13-Master缺失接口精准对比.md#二会话查询接口-4-个--25-完整)

### 消息功能
- 📄 [原版IM-API清单.md#三消息查询接口](./原版IM-API清单.md#三消息查询接口-6-个)
- 📄 [原版IM-API清单.md#四消息操作接口](./原版IM-API清单.md#四消息操作接口-5-个)
- 📄 [API对比-快速参考表.md#消息查询](./API对比-快速参考表.md#消息查询-26--33)
- 📄 [API对比-快速参考表.md#消息操作](./API对比-快速参考表.md#消息操作-15--20)

### 技术细节
- 📄 [API对比总结-原版IM-vs-Master.md#三关键差异](./API对比总结-原版IM-vs-Master.md#三关键差异)
- 📄 [API对比-快速参考表.md#关键数据转换](./API对比-快速参考表.md#关键数据转换)

---

## 📈 统计数据速览

### API 总数
- **原版 IM**: 24 个
- **Master**: 50+ 个
- **完全匹配**: 6 个 (25%)
- **部分实现**: 4 个 (17%)
- **完全缺失**: 14 个 (58%)

### 工作量
- **P1 必须**: 50 小时
- **P2 重要**: 21 小时
- **P3 可选**: 7 小时
- **总计**: 78 小时

### 完整度
| 类别 | Master | 原版 IM | 完整度 |
|------|--------|--------|--------|
| 账户管理 | 6 | 6 | ✅ 100% |
| 会话查询 | 1 | 4 | ⚠️ 25% |
| 消息查询 | 2 | 6 | ⚠️ 33% |
| 消息操作 | 1 | 5 | ⚠️ 20% |
| 用户管理 | 0 | 3 | ❌ 0% |

---

## 🔄 文档关系图

```
API对比-快速参考表.md
    ↓
  用来快速查看某个功能的状态
    ↓
┌─ 如果需要详细说明 → 13-Master缺失接口精准对比.md
├─ 如果需要原版格式 → 原版IM-API清单.md
├─ 如果需要Master格式 → Master-API现有清单.md
└─ 如果需要深度分析 → API对比总结-原版IM-vs-Master.md
```

---

## ✨ 特色功能

### 原版 IM 独有
- 全文消息搜索 (FTS)
- 消息编辑历史
- 用户黑名单
- 会话置顶/静音

### Master 独有
- Worker 分布式管理
- 代理 IP 管理
- 多平台支持
- 账户心跳监控
- 批量操作

### 都有但实现方式不同
- 消息发送 (Socket.IO vs HTTP)
- 分页 (cursor vs offset/limit)
- 时间戳 (毫秒 vs 秒)

---

## 🚀 下一步

根据你的需要:

1. **快速查询** → 用 [API对比-快速参考表.md](./API对比-快速参考表.md)
2. **了解现状** → 读 [Master-API现有清单.md](./Master-API现有清单.md)
3. **了解需求** → 读 [原版IM-API清单.md](./原版IM-API清单.md)
4. **开始实现** → 参考 [13-Master缺失接口精准对比.md](./13-Master缺失接口精准对比.md)
5. **深度理解** → 读 [API对比总结-原版IM-vs-Master.md](./API对比总结-原版IM-vs-Master.md)

---

**版本**: 1.0

**最后更新**: 2025-10-23

**维护者**: Claude Code

