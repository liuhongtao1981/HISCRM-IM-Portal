# MCP å¿«é€Ÿå‚è€ƒå¡

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### 1ï¸âƒ£ å¯åŠ¨ç³»ç»Ÿ
```bash
cd packages/master
DEBUG=true npm start
```

âœ… æ£€æŸ¥ï¼š
- Master è¿è¡Œåœ¨ port 3000
- Worker è‡ªåŠ¨å¯åŠ¨
- æµè§ˆå™¨è¿›ç¨‹å¯åŠ¨
- æµè§ˆå™¨äº‹ä»¶é€šè¿‡ Socket.IO å‘é€ç»™ Master
- Anthropic MCP é€šè¿‡ port 9222 ä¸º Claude æä¾›æµè§ˆå™¨æ§åˆ¶èƒ½åŠ›

### 2ï¸âƒ£ åœ¨ Claude Code ä¸­è°ƒè¯•

ç°åœ¨å¯ä»¥åœ¨ Claude ä¸­é—®æµè§ˆå™¨é—®é¢˜ã€‚Claude ä¼šé€šè¿‡ **Anthropic chrome-devtools-mcp** æŸ¥çœ‹æµè§ˆå™¨ã€‚

## ğŸ“¡ ä¸¤ä¸ª MCP çš„åŒºåˆ«

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æˆ‘ä»¬çš„è‡ªå®šä¹‰ MCP             â”‚  Anthropic MCP               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç”¨é€”: Node.js åº”ç”¨é€šä¿¡        â”‚ ç”¨é€”: Claude å®æ—¶è°ƒè¯•        â”‚
â”‚ åœ°å€: localhost:9222          â”‚ ç”± Claude è°ƒç”¨               â”‚
â”‚ è¿è¡Œ: 24/7 è‡ªåŠ¨               â”‚ è¿è¡Œ: æŒ‰éœ€ (npx)             â”‚
â”‚ æ¶ˆæ¯: ä¸šåŠ¡äº‹ä»¶                â”‚ æ¶ˆæ¯: æµè§ˆå™¨äº¤äº’             â”‚
â”‚ ç”¨æˆ·: Worker/Master           â”‚ ç”¨æˆ·: Claude AI              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ’¬ Claude ä¸­çš„å¸¸ç”¨å‘½ä»¤

### åŸºç¡€æŸ¥è¯¢
```
"ä½¿ç”¨ chrome-devtools æˆªå›¾ï¼Œçœ‹çœ‹æµè§ˆå™¨ç°åœ¨çš„æ ·å­"
"å½“å‰æµè§ˆå™¨åœ¨å“ªä¸ª URLï¼Ÿ"
"ç§ä¿¡é¡µé¢åŠ è½½å®Œæˆäº†å—ï¼Ÿ"
```

### å…ƒç´ æŸ¥è¯¢
```
"æŸ¥æ‰¾ class='reply-btn' çš„å…ƒç´ ï¼Œå®ƒå­˜åœ¨å—ï¼Ÿ"
"æœ‰å¤šå°‘æ¡ç§ä¿¡æ¶ˆæ¯ï¼Ÿè¯·ç”¨ querySelector æ•°ä¸€ä¸‹"
"æ˜¾ç¤ºç¬¬ä¸€æ¡ç§ä¿¡çš„ HTML ç»“æ„"
```

### JavaScript æ‰§è¡Œ
```
"æ‰§è¡Œ document.querySelectorAll('.message').length çœ‹çœ‹æœ‰å‡ æ¡æ¶ˆæ¯"
"æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ï¼Œçœ‹çœ‹æœ‰ä»€ä¹ˆé”™è¯¯æ—¥å¿—"
"æ‰§è¡Œ localStorage.getItem('auth_token') çœ‹çœ‹ç™»å½• token"
```

### äº¤äº’æ“ä½œ
```
"ç‚¹å‡»é¡µé¢ä¸Šçš„ç¬¬ä¸€æ¡ç§ä¿¡"
"åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥ 'è¿™æ˜¯æˆ‘çš„å›å¤'"
"ç‚¹å‡»'å‘é€'æŒ‰é’®æäº¤è¡¨å•"
"æ»šåŠ¨é¡µé¢åˆ°åº•éƒ¨"
```

### è°ƒè¯•åˆ†æ
```
"åˆ†æé¡µé¢åŠ è½½æ€§èƒ½ï¼Œçœ‹çœ‹èŠ±äº†å¤šé•¿æ—¶é—´"
"æ£€æŸ¥ç½‘ç»œè¯·æ±‚ï¼Œæ‰¾å‡ºè·å–ç§ä¿¡çš„ API æ˜¯ä»€ä¹ˆ"
"åˆ†æ DOM æ ‘ï¼Œçœ‹çœ‹ç§ä¿¡åˆ—è¡¨çš„ç»“æ„"
```

## ğŸ“Š ç›‘æ§çŠ¶æ€

### æŸ¥çœ‹æµè§ˆå™¨äº‹ä»¶å’Œ Worker ä¿¡æ¯
```bash
# æµè§ˆå™¨äº‹ä»¶å·²å­˜å‚¨åœ¨ Masterï¼Œå¯é€šè¿‡ Master API æŸ¥è¯¢
curl -s "http://127.0.0.1:3000/api/workers" | python -m json.tool

# æŸ¥çœ‹ç‰¹å®š Worker çš„ä¿¡æ¯
curl -s "http://127.0.0.1:3000/api/workers/worker1" | python -m json.tool
```

### é€šè¿‡ Claude æŸ¥çœ‹æµè§ˆå™¨
```
åœ¨ Claude Code ä¸­ä½¿ç”¨ Anthropic MCP (port 9222):
"ä½¿ç”¨ chrome-devtools æˆªå›¾ï¼Œçœ‹çœ‹æµè§ˆå™¨ç°åœ¨çš„çŠ¶æ€"
```

### Master å¯ç”¨çš„ API ç«¯ç‚¹
```
/api/workers       - Worker åˆ—è¡¨å’ŒçŠ¶æ€
/api/accounts      - è´¦æˆ·ä¿¡æ¯
/api/comments      - è¯„è®ºæ•°æ®
/api/messages      - æ¶ˆæ¯æ•°æ®
```

## ğŸ” è°ƒè¯•ç§ä¿¡å›å¤çš„å…¸å‹æµç¨‹

### é—®é¢˜ï¼šç§ä¿¡å›å¤ä¸å·¥ä½œ

```
1ï¸âƒ£ é—® Claude: "æµè§ˆå™¨ç°åœ¨æ˜¾ç¤ºä»€ä¹ˆï¼Ÿè¯·æˆªå›¾"
   âœ… Claude æ‹ç…§çœ‹åˆ°é¡µé¢ç°çŠ¶

2ï¸âƒ£ é—® Claude: "èƒ½æ‰¾åˆ°'å›å¤'æŒ‰é’®å—ï¼Ÿ"
   âœ… æˆ–æ‰¾åˆ°ï¼Œæˆ–æç¤ºé€‰æ‹©å™¨é”™è¯¯

3ï¸âƒ£ é—® Claude: "æ˜¾ç¤ºç§ä¿¡æ¶ˆæ¯çš„ HTML ç»“æ„"
   âœ… è·å¾—å®é™…çš„ HTMLï¼Œæ‰¾å‡ºæ­£ç¡®é€‰æ‹©å™¨

4ï¸âƒ£ ä¿®æ”¹è„šæœ¬ä¸­çš„é€‰æ‹©å™¨

5ï¸âƒ£ é—® Claude: "å†è¯•ä¸€æ¬¡ï¼Œç°åœ¨èƒ½æ‰¾åˆ°æŒ‰é’®å—ï¼Ÿ"
   âœ… éªŒè¯ä¿®æ”¹æ˜¯å¦æˆåŠŸ

6ï¸âƒ£ é—® Claude: "è¯•è¯•ç‚¹å‡»è¿™ä¸ªæŒ‰é’®"
   âœ… Claude é€šè¿‡ MCP äº¤äº’é¡µé¢

7ï¸âƒ£ é—® Claude: "åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥'æµ‹è¯•å›å¤'"
   âœ… Claude å¡«å……è¡¨å•

8ï¸âƒ£ é—® Claude: "ç‚¹å‡»å‘é€æŒ‰é’®"
   âœ… æäº¤å›å¤ï¼Œæµ‹è¯•å®Œæˆ
```

## ğŸ“‹ é…ç½®æ–‡ä»¶

### `.claude/mcp.json` - MCP é…ç½®
```json
{
  "mcpServers": {
    "chrome-devtools": {
      "command": "npx",
      "args": ["-y", "chrome-devtools-mcp@latest"]
    }
  }
}
```

### `packages/master/src/config/debug-config.js` - DEBUG æ¨¡å¼é…ç½®
```javascript
{
  debug: {
    enabled: true,
    singleWorkerMode: true,
    autoStartWorker: true,
    // ...
  },
  mcp: {
    enabled: true,
    port: 9222,
    logBrowserEvents: true
  }
}
```

## âš¡ å¿«é€Ÿé—®é¢˜è¯Šæ–­

| ç—‡çŠ¶ | å¿«é€Ÿè¯Šæ–­ | è§£å†³æ–¹æ¡ˆ |
|------|---------|---------|
| æµè§ˆå™¨æ‰¾ä¸åˆ°æŒ‰é’® | "Claudeï¼Œæ˜¾ç¤ºè¯¥æŒ‰é’®çš„ HTML" | æ›´æ–°é€‰æ‹©å™¨ |
| é¡µé¢åŠ è½½ä¸å®Œæ•´ | "Claudeï¼Œæˆªå›¾çœ‹çœ‹" | å¢åŠ ç­‰å¾…æ—¶é—´ |
| è¡¨å•å¡«å……å¤±è´¥ | "Claudeï¼Œè¯•è¯•å¡«å……è¿™ä¸ªæ–‡æœ¬æ¡†" | æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨ |
| è„šæœ¬æ‰§è¡Œå‡ºé”™ | "Claudeï¼Œæ£€æŸ¥æ§åˆ¶å°é”™è¯¯" | æŸ¥çœ‹ JavaScript é”™è¯¯ |
| æ•°æ®è·å–å¤±è´¥ | "Claudeï¼Œæ£€æŸ¥ç½‘ç»œè¯·æ±‚" | åˆ†æ API å“åº” |

## ğŸ¯ ä»Šå¤©çš„è°ƒè¯•åœºæ™¯

**ä»»åŠ¡**ï¼šè°ƒè¯•ç§ä¿¡å›å¤åŠŸèƒ½

```
ç°åœ¨çš„çŠ¶æ€:
âœ… Master å·²å¯åŠ¨ï¼ˆDEBUG æ¨¡å¼ï¼‰
âœ… Worker å·²å¯åŠ¨ï¼ˆè‡ªåŠ¨ï¼‰
âœ… æµè§ˆå™¨å·²åˆå§‹åŒ–
âœ… MCP å·²é…ç½®
âœ… Anthropic MCP å·²å¯ç”¨

ä¸‹ä¸€æ­¥:
1. é—® Claude: "æµè§ˆå™¨èƒ½çœ‹åˆ°ç§ä¿¡å—ï¼Ÿ"
2. æ ¹æ®åé¦ˆè°ƒæ•´è„šæœ¬
3. å¿«é€Ÿè¿­ä»£ï¼Œç›´åˆ°é—®é¢˜è§£å†³
```

## ğŸ“š è¯¦ç»†æ–‡æ¡£

- **å®Œæ•´é…ç½®æŒ‡å—**: `docs/ANTHROPIC-MCP-SETUP-GUIDE.md`
- **æµè§ˆå™¨äº¤äº’æµ‹è¯•**: `docs/MCP-BROWSER-INTERACTION-SUCCESS.md`
- **Anthropic MCP å‚è€ƒ**: https://github.com/ChromeDevTools/chrome-devtools-mcp

## ğŸ’¡ é«˜çº§ç”¨æ³•

### æ‰§è¡Œå¤æ‚çš„ JavaScript
```
Claude: "æ‰§è¡Œè¿™æ®µä»£ç ï¼Œçœ‹çœ‹ç»“æœ"
ä»£ç :
```javascript
const messages = document.querySelectorAll('.message');
const result = Array.from(messages).map(msg => ({
  sender: msg.querySelector('.sender')?.textContent,
  content: msg.querySelector('.content')?.textContent,
  time: msg.querySelector('.time')?.textContent
}));
console.log(JSON.stringify(result, null, 2));
```
```

### ç­‰å¾…åŠ¨æ€åŠ è½½
```
Claude: "ç­‰ 3 ç§’è®©é¡µé¢åŠ è½½ï¼Œç„¶åé‡æ–°æˆªå›¾"
```

### æ€§èƒ½åˆ†æ
```
Claude: "ä½¿ç”¨ performance API æµ‹é‡é¡µé¢åŠ è½½æ—¶é—´"
```

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿå¼€å§‹åœ¨ Claude Code ä¸­è°ƒè¯•å§ï¼** ğŸš€
