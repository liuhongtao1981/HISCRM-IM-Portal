# ç™»å½•æ£€æµ‹ä»»åŠ¡æœªå¯åŠ¨é—®é¢˜æ’æŸ¥

## é—®é¢˜æè¿°

ç”¨æˆ·ä»IMå®¢æˆ·ç«¯ç™»å½•åï¼Œæµè§ˆå™¨å·²æ‰“å¼€å¹¶æ˜¾ç¤ºæŠ–éŸ³åˆ›ä½œä¸­å¿ƒï¼Œä½†ç™»å½•æ£€æµ‹ä»»åŠ¡æ²¡æœ‰æ‰§è¡Œï¼Œè´¦æˆ·çŠ¶æ€æœªæ›´æ–°ã€‚

## é—®é¢˜æ ¹æº

### 1. æµè§ˆå™¨åˆå§‹åŒ–å¤±è´¥

**é”™è¯¯æ—¥å¿—**ï¼š
```
[browser-manager-v2] error: Failed to launch persistent context for account acc-2be36e29-9b29-470f-bd60-8d85ae49b8e1: browserType.launchPersistentContext: Target page, context or browser has been closed
```

**å½±å“**ï¼š
- æ‰€æœ‰è´¦æˆ·çš„æµè§ˆå™¨åˆå§‹åŒ–éƒ½å¤±è´¥
- `accountInitializer.isInitialized(accountId)` è¿”å› `false`
- è´¦æˆ·æ²¡æœ‰è¢«æ ‡è®°ä¸ºå·²åˆå§‹åŒ–

### 2. ä»»åŠ¡æœªæ·»åŠ 

**æ—¥å¿—**ï¼š
```
[worker] warn: Skipping task for account acc-2be36e29-9b29-470f-bd60-8d85ae49b8e1 (browser initialization failed)
[worker] info: âœ“ Added 0 login detection + monitoring tasks
```

**åŸå› **ï¼š
Workeråœ¨æ·»åŠ ä»»åŠ¡æ—¶æ£€æŸ¥ `accountInitializer.isInitialized(accountId)`ï¼Œç”±äºæµè§ˆå™¨åˆå§‹åŒ–å¤±è´¥ï¼Œæ‰€æœ‰è´¦æˆ·è¢«è·³è¿‡ã€‚

**ä»£ç ä½ç½®** ([packages/worker/src/index.js:335-342](../packages/worker/src/index.js#L335-L342))ï¼š
```javascript
for (const account of assignedAccounts) {
  if (accountInitializer.isInitialized(account.id)) {
    await taskRunner.addTask(account, { startLoginDetection: false });
    addedTasksCount++;
  } else {
    logger.warn(`Skipping task for account ${account.id} (browser initialization failed)`);
  }
}
```

### 3. Masterä»»åŠ¡è°ƒåº¦å™¨ä¹Ÿæœªè°ƒåº¦

**æ—¥å¿—**ï¼š
```
[task-scheduler] info: No active accounts to schedule (all accounts are either inactive or manually assigned)
```

Masterç«¯çš„ä»»åŠ¡è°ƒåº¦å™¨ä¹Ÿæ²¡æœ‰æ‰¾åˆ°å¯è°ƒåº¦çš„è´¦æˆ·ã€‚

## æµè§ˆå™¨å¯åŠ¨å¤±è´¥çš„åŸå› 

Playwrighté”™è¯¯ "Target page, context or browser has been closed" é€šå¸¸å‘ç”Ÿåœ¨ï¼š

1. **æµè§ˆå™¨è¿›ç¨‹ç«‹å³å´©æºƒ** - å¯åŠ¨å‚æ•°ä¸å…¼å®¹å¯¼è‡´Chromeå¯åŠ¨åå´©æºƒ
2. **GPUå‚æ•°å†²çª** - å¤§é‡ç¦ç”¨GPUçš„å‚æ•°å¯èƒ½å¯¼è‡´Chromeæ— æ³•æ­£å¸¸æ¸²æŸ“ï¼š
   ```
   --disable-gpu
   --disable-gpu-compositing
   --disable-gpu-rasterization
   --disable-gpu-sandbox
   --disable-software-rasterizer
   ```
3. **å¯¼èˆªè¶…æ—¶** - å¯åŠ¨åç«‹å³å¯¼èˆªåˆ°åˆ›ä½œä¸­å¿ƒå¯èƒ½è¶…æ—¶
4. **åæ£€æµ‹è„šæœ¬é—®é¢˜** - æ³¨å…¥çš„åæ£€æµ‹è„šæœ¬å¯¼è‡´æµè§ˆå™¨å´©æºƒ

## ç”¨æˆ·è§‚å¯Ÿåˆ°çš„ç°è±¡

ç”¨æˆ·æŠ¥å‘Šï¼š"å¯åŠ¨æ²¡å¤±è´¥ï¼Œæˆ‘çœ‹åˆ°æµè§ˆå™¨å®ä¾‹åœ¨ï¼Œå¹¶ä¸”æ‰“å¼€äº†æŠ–éŸ³åˆ›ä½œè€…ä¸­å¿ƒ"

**å¯èƒ½çš„è§£é‡Š**ï¼š
1. ç”¨æˆ·çœ‹åˆ°çš„æ˜¯**æ—©æœŸé—ç•™çš„æµè§ˆå™¨è¿›ç¨‹**ï¼ˆä¹‹å‰Workerå¯åŠ¨æ—¶çš„ï¼‰
2. æˆ–è€…æµè§ˆå™¨**æ‰‹åŠ¨æ‰“å¼€**çš„ï¼Œä¸æ˜¯Workerå¯åŠ¨çš„
3. æˆ–è€…æµè§ˆå™¨å¯åŠ¨æˆåŠŸä½†Playwrightè¿æ¥å¤±è´¥åï¼Œæµè§ˆå™¨è¿›ç¨‹ç»§ç»­è¿è¡Œ

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šä¿®å¤æµè§ˆå™¨å¯åŠ¨å‚æ•°ï¼ˆæ¨èï¼‰

æ£€æŸ¥å¹¶ä¼˜åŒ– [packages/worker/src/browser/browser-manager-v2.js](../packages/worker/src/browser/browser-manager-v2.js) ä¸­çš„æµè§ˆå™¨å¯åŠ¨å‚æ•°ï¼š

1. **å‡å°‘GPUç¦ç”¨å‚æ•°** - å°è¯•åªä¿ç•™ `--disable-gpu`ï¼Œç§»é™¤å…¶ä»–GPUç›¸å…³ç¦ç”¨
2. **å¢åŠ è¶…æ—¶æ—¶é—´** - å¦‚æœæ˜¯å¯¼èˆªè¶…æ—¶å¯¼è‡´çš„ï¼Œå¢åŠ  `timeout` é…ç½®
3. **ç¦ç”¨åˆå§‹åŒ–æ—¶çš„é¦–é¡µåŠ è½½** - å»¶è¿Ÿåˆ°ä»»åŠ¡æ‰§è¡Œæ—¶å†å¯¼èˆª

### æ–¹æ¡ˆ2ï¼šæ”¹è¿›åˆå§‹åŒ–å®¹é”™æ€§

ä¿®æ”¹ [packages/worker/src/handlers/account-initializer.js](../packages/worker/src/handlers/account-initializer.js) çš„ `initializeAccount()` æ–¹æ³•ï¼š

1. **åˆ†æ­¥åˆå§‹åŒ–** - æµè§ˆå™¨å¯åŠ¨æˆåŠŸåç«‹å³æ ‡è®°ä¸ºå·²åˆå§‹åŒ–ï¼Œå¯¼èˆªå¤±è´¥ä¸å½±å“
2. **é‡è¯•æœºåˆ¶** - æµè§ˆå™¨å¯åŠ¨å¤±è´¥åè‡ªåŠ¨é‡è¯•1-2æ¬¡
3. **æ›´è¯¦ç»†çš„é”™è¯¯æ—¥å¿—** - è®°å½•å…·ä½“å“ªä¸€æ­¥å¤±è´¥äº†

### æ–¹æ¡ˆ3ï¼šå®ç°ä»»åŠ¡çƒ­æ·»åŠ 

å³ä½¿åˆå§‹åŒ–æ—¶å¤±è´¥ï¼Œåç»­å¯ä»¥åŠ¨æ€æ·»åŠ ä»»åŠ¡ï¼š

1. æ‰‹åŠ¨ç™»å½•æˆåŠŸåï¼Œé‡æ–°å°è¯•åˆå§‹åŒ–æµè§ˆå™¨
2. åˆå§‹åŒ–æˆåŠŸåï¼ŒåŠ¨æ€æ·»åŠ ç™»å½•æ£€æµ‹ä»»åŠ¡
3. è¿™æ ·å°±ä¸ä¾èµ–äºWorkerå¯åŠ¨æ—¶çš„åˆå§‹åŒ–

## ä¸´æ—¶è§£å†³æ–¹æ¡ˆ

### æ‰‹åŠ¨ä¿®å¤å½“å‰çŠ¶æ€

å¦‚æœæµè§ˆå™¨å®é™…ä¸Šå·²ç»åœ¨è¿è¡Œï¼ˆç”¨æˆ·çœ‹åˆ°çš„çª—å£ï¼‰ï¼Œå¯ä»¥æ‰‹åŠ¨è§¦å‘ä»»åŠ¡æ·»åŠ ï¼š

1. é‡å¯Workerè¿›ç¨‹ï¼Œè®©å®ƒé‡æ–°å°è¯•åˆå§‹åŒ–
2. æˆ–è€…å®ç°ä¸€ä¸ªAPIç«¯ç‚¹ï¼Œå…è®¸æ‰‹åŠ¨è§¦å‘è´¦æˆ·åˆå§‹åŒ–å’Œä»»åŠ¡æ·»åŠ 

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **ç¡®è®¤æµè§ˆå™¨çª—å£å½’å±** - æ£€æŸ¥ç”¨æˆ·çœ‹åˆ°çš„æµè§ˆå™¨çª—å£æ˜¯å¦å±äºå½“å‰Workerè¿›ç¨‹
2. **ä¼˜åŒ–å¯åŠ¨å‚æ•°** - ç§»é™¤å¯èƒ½å¯¼è‡´å´©æºƒçš„å¯åŠ¨å‚æ•°
3. **å¢åŠ è°ƒè¯•æ—¥å¿—** - åœ¨æµè§ˆå™¨åˆå§‹åŒ–çš„æ¯ä¸€æ­¥æ·»åŠ è¯¦ç»†æ—¥å¿—
4. **å®ç°é‡è¯•æœºåˆ¶** - æµè§ˆå™¨å¯åŠ¨å¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•

## ç›¸å…³æ–‡ä»¶

- [packages/worker/src/index.js](../packages/worker/src/index.js#L335-L342) - ä»»åŠ¡æ·»åŠ é€»è¾‘
- [packages/worker/src/handlers/account-initializer.js](../packages/worker/src/handlers/account-initializer.js) - è´¦æˆ·åˆå§‹åŒ–å™¨
- [packages/worker/src/browser/browser-manager-v2.js](../packages/worker/src/browser/browser-manager-v2.js) - æµè§ˆå™¨ç®¡ç†å™¨
- [packages/master/src/scheduler/task-scheduler.js](../packages/master/src/scheduler/task-scheduler.js) - Masterä»»åŠ¡è°ƒåº¦å™¨

## é—®é¢˜å‘ç°æ—¥æœŸ

2025-11-25

## æœ€ç»ˆè§£å†³æ–¹æ¡ˆ

### æ ¹æœ¬åŸå› ï¼ˆç”¨æˆ·è¯Šæ–­ï¼‰

æ‰‹åŠ¨ç™»å½•æ—¶æµè§ˆå™¨é‡å¯æµç¨‹ç¼ºå°‘å…³é”®æ­¥éª¤ï¼š**æ¸…ç†æµè§ˆå™¨ç”¨æˆ·æ•°æ®ç›®å½•**ã€‚

æ­£ç¡®çš„æµç¨‹åº”è¯¥æ˜¯ï¼š
1. Master å‘é€é‡å¯æŒ‡ä»¤ç»™ Worker
2. Worker å…³é—­æµè§ˆå™¨è¿›ç¨‹
3. **Worker æ¸…ç†æµè§ˆå™¨ç”¨æˆ·æ•°æ®ç›®å½•** â­ ç¼ºå°‘æ­¤æ­¥éª¤
4. **Worker é‡æ–°å†™å…¥æ–°çš„ cookies å’Œ localStorage** â­ ç¼ºå°‘æ­¤æ­¥éª¤
5. Worker å¯åŠ¨æµè§ˆå™¨ï¼ˆèµ°æ­£å¸¸åˆå§‹åŒ–æµç¨‹ï¼‰
6. æµè§ˆå™¨åˆå§‹åŒ–æˆåŠŸï¼Œä»»åŠ¡è¢«æ·»åŠ 

### ä¿®å¤ä»£ç 

#### 1. åœ¨ BrowserManagerV2 ä¸­æ·»åŠ æ¸…ç†æ–¹æ³•

[packages/worker/src/browser/browser-manager-v2.js](../packages/worker/src/browser/browser-manager-v2.js#L1050-L1079):

```javascript
/**
 * æ¸…ç†è´¦æˆ·çš„æµè§ˆå™¨ç”¨æˆ·æ•°æ®ç›®å½•
 * ç”¨äºæ‰‹åŠ¨ç™»å½•æ—¶é‡ç½®æµè§ˆå™¨çŠ¶æ€
 */
async cleanUserDataDir(accountId) {
  try {
    const userDataDir = path.join(this.config.dataDir, `browser_${accountId}`);

    if (fs.existsSync(userDataDir)) {
      logger.info(`Cleaning user data directory for account ${accountId}: ${userDataDir}`);

      // é€’å½’åˆ é™¤æ•´ä¸ªç”¨æˆ·æ•°æ®ç›®å½•
      fs.rmSync(userDataDir, { recursive: true, force: true });
      logger.info(`âœ“ User data directory cleaned for account ${accountId}`);
    } else {
      logger.info(`User data directory does not exist for account ${accountId}, skip cleaning`);
    }

    // æ¸…ç†å­˜å‚¨çŠ¶æ€è·¯å¾„è®°å½•
    this.storageStatePaths.delete(accountId);

  } catch (error) {
    logger.error(`Failed to clean user data directory for account ${accountId}:`, error);
    throw error;
  }
}
```

#### 2. ä¿®æ”¹æ‰‹åŠ¨ç™»å½•å¤„ç†å™¨

[packages/worker/src/index.js](../packages/worker/src/index.js#L203-L288):

```javascript
socketClient.onMessage(MASTER_UPDATE_ACCOUNT_STORAGE, async (data) => {
  const { accountId, platform, storageState } = data;
  logger.info(`ğŸ“¥ [æ‰‹åŠ¨ç™»å½•] æ”¶åˆ°è´¦æˆ· ${accountId} çš„å­˜å‚¨çŠ¶æ€æ›´æ–°`);

  try {
    // 1. å…³é—­æµè§ˆå™¨
    await browserManager.closeBrowser(accountId);
    logger.info(`[æ‰‹åŠ¨ç™»å½•] âœ“ å·²å…³é—­è´¦æˆ· ${accountId} çš„æ—§æµè§ˆå™¨`);

    // 2. â­ æ¸…ç†æµè§ˆå™¨ç”¨æˆ·æ•°æ®ç›®å½•ï¼ˆå…³é”®æ­¥éª¤ï¼‰
    await browserManager.cleanUserDataDir(accountId);
    logger.info(`[æ‰‹åŠ¨ç™»å½•] âœ“ å·²æ¸…ç†è´¦æˆ· ${accountId} çš„æµè§ˆå™¨ç”¨æˆ·æ•°æ®ç›®å½•`);

    // 3. ä»å·²åˆå§‹åŒ–é›†åˆä¸­ç§»é™¤
    if (accountInitializer.isInitialized(accountId)) {
      accountInitializer.initializedAccounts.delete(accountId);
      logger.info(`[æ‰‹åŠ¨ç™»å½•] âœ“ å·²ä»å·²åˆå§‹åŒ–é›†åˆä¸­ç§»é™¤è´¦æˆ· ${accountId}`);
    }

    // 4. å‡†å¤‡æ–°çš„è´¦æˆ·é…ç½®ï¼ˆåŒ…å«æ–°çš„ cookies å’Œ localStorageï¼‰
    const accountConfig = await reloadAccountConfig(accountId);
    accountConfig.credentials.cookies = storageState.cookies || [];
    // ... localStorage è½¬æ¢ ...

    // 5. å¯åŠ¨æµè§ˆå™¨ï¼ˆaccountInitializer ä¼šåˆ›å»ºæ–°çš„ç”¨æˆ·æ•°æ®ç›®å½•å¹¶å†™å…¥ cookiesï¼‰
    await accountInitializer.initializeAccount(accountConfig);
    logger.info(`[æ‰‹åŠ¨ç™»å½•] âœ“ è´¦æˆ· ${accountId} æµè§ˆå™¨å·²ä½¿ç”¨æ–°å­˜å‚¨çŠ¶æ€é‡æ–°åˆå§‹åŒ–`);

    // 6. å‘é€æˆåŠŸé€šçŸ¥ç»™ Master
    socketClient.sendMessage(createMessage(WORKER_ACCOUNT_RESTARTED, {
      accountId,
      platform,
      success: true,
      timestamp: Date.now(),
    }));

  } catch (error) {
    logger.error(`[æ‰‹åŠ¨ç™»å½•] è´¦æˆ· ${accountId} é‡å¯å¤±è´¥:`, error);
    // å‘é€å¤±è´¥é€šçŸ¥...
  }
});
```

### ä¿®å¤æ•ˆæœ

ä¿®å¤åçš„æµç¨‹ç¡®ä¿ï¼š
1. âœ… æ—§çš„æµè§ˆå™¨ç”¨æˆ·æ•°æ®è¢«å®Œå…¨æ¸…ç†
2. âœ… æ–°çš„ cookies å’Œ localStorage å†™å…¥åˆ°å¹²å‡€çš„ç›®å½•
3. âœ… æµè§ˆå™¨ä½¿ç”¨æ–°çš„æ•°æ®å¯åŠ¨ï¼Œä¸ä¼šæœ‰æ—§æ•°æ®æ®‹ç•™
4. âœ… æµè§ˆå™¨åˆå§‹åŒ–æˆåŠŸ
5. âœ… è´¦æˆ·è¢«æ ‡è®°ä¸ºå·²åˆå§‹åŒ–
6. âœ… ç™»å½•æ£€æµ‹ä»»åŠ¡è¢«æ­£å¸¸æ·»åŠ 

### ä¿®å¤æ­¥éª¤ 3ï¼šæ¸…ç† TabManager ä¸­çš„æ—§ tab å¼•ç”¨

**é—®é¢˜**ï¼šå³ä½¿æµè§ˆå™¨æˆåŠŸé‡å¯å¹¶å†™å…¥äº†æ–°çš„ cookiesï¼Œç™»å½•æ£€æµ‹ä»ç„¶å¤±è´¥ï¼Œå› ä¸º TabManager é‡ç”¨äº†æµè§ˆå™¨é‡å¯å‰çš„æ—§ tab å¼•ç”¨ã€‚

**æ—¥å¿—è¡¨ç°**ï¼š
```
[TabManager] info: â™»ï¸  Reusing shareable tab tab-1 for placeholder
[login-detection-task] warn: Failed to reload page (will check current state): page.reload: Target page, context or browser has been closed
[douyin-platform] warn: [checkLoginStatus] Debug failed: page.evaluate: Target page, context or browser has been closed
```

**æ ¹æœ¬åŸå› **ï¼š
- TabManager çš„ shareable tabs åœ¨æµè§ˆå™¨é‡å¯åæ²¡æœ‰è¢«æ¸…ç†
- ç™»å½•æ£€æµ‹ä»»åŠ¡é‡ç”¨äº†æ—§çš„ tab-1 é¡µé¢å¯¹è±¡
- æ—§çš„é¡µé¢å¯¹è±¡å¼•ç”¨çš„æ˜¯å·²å…³é—­çš„æµè§ˆå™¨ä¸Šä¸‹æ–‡
- å¯¼è‡´æ‰€æœ‰é¡µé¢æ“ä½œéƒ½å¤±è´¥

**ä¿®å¤æ–¹æ¡ˆ**ï¼š

åœ¨ [packages/worker/src/index.js](../packages/worker/src/index.js#L225-L231) çš„æ‰‹åŠ¨ç™»å½•å¤„ç†å™¨ä¸­ï¼Œæ·»åŠ æ¸…ç† tab å¼•ç”¨çš„æ­¥éª¤ï¼š

```javascript
// 2.5 æ¸…ç† TabManager ä¸­çš„æ—§ tab å¼•ç”¨ï¼ˆâ­ å…³é”®æ­¥éª¤ï¼šé˜²æ­¢é‡ç”¨å·²å…³é—­çš„é¡µé¢ï¼‰
try {
  await browserManager.tabManager.clearAccountTabs(accountId);
  logger.info(`[æ‰‹åŠ¨ç™»å½•] âœ“ å·²æ¸…ç†è´¦æˆ· ${accountId} çš„æ—§ tab å¼•ç”¨`);
} catch (error) {
  logger.warn(`[æ‰‹åŠ¨ç™»å½•] æ¸…ç† tab å¼•ç”¨å¤±è´¥ï¼ˆå¯å¿½ç•¥ï¼‰:`, error.message);
}
```

è¿™ä¸ªæ­¥éª¤è°ƒç”¨äº† TabManager å·²æœ‰çš„ `clearAccountTabs()` æ–¹æ³•ï¼ˆ[packages/worker/src/browser/tab-manager.js:471-489](../packages/worker/src/browser/tab-manager.js#L471-L489)ï¼‰ï¼Œè¯¥æ–¹æ³•ä¼šï¼š
1. å…³é—­è´¦æˆ·çš„æ‰€æœ‰ tab
2. ä» tabs Map ä¸­åˆ é™¤è´¦æˆ·çš„æ‰€æœ‰ tab å¼•ç”¨
3. ç¡®ä¿ä¸‹æ¬¡ä»»åŠ¡æ‰§è¡Œæ—¶ä¼šåˆ›å»ºæ–°çš„ tab

**ä¿®å¤æ•ˆæœ**ï¼š
1. âœ… æ—§çš„ tab å¼•ç”¨è¢«å®Œå…¨æ¸…ç†
2. âœ… ç™»å½•æ£€æµ‹ä»»åŠ¡ä½¿ç”¨æ–°çš„æµè§ˆå™¨ä¸Šä¸‹æ–‡åˆ›å»ºæ–°çš„ tab
3. âœ… é¡µé¢æ“ä½œæˆåŠŸæ‰§è¡Œ
4. âœ… ç™»å½•çŠ¶æ€æ£€æµ‹æˆåŠŸ
5. âœ… ç›‘æ§ä»»åŠ¡æ­£å¸¸å¯åŠ¨

### å®Œæ•´çš„æ‰‹åŠ¨ç™»å½•æµè§ˆå™¨é‡å¯æµç¨‹

ä¿®å¤åçš„æ­£ç¡®æµç¨‹ï¼š

1. **å…³é—­æ—§æµè§ˆå™¨** - `browserManager.closeBrowser(accountId)`
2. **æ¸…ç†ç”¨æˆ·æ•°æ®ç›®å½•** - `browserManager.cleanUserDataDir(accountId)` â­
3. **æ¸…ç† tab å¼•ç”¨** - `browserManager.tabManager.clearAccountTabs(accountId)` â­
4. **ç§»é™¤å·²åˆå§‹åŒ–æ ‡è®°** - `accountInitializer.initializedAccounts.delete(accountId)`
5. **å‡†å¤‡æ–°é…ç½®** - åŠ è½½è´¦æˆ·é…ç½®ï¼Œè®¾ç½®æ–°çš„ cookies å’Œ localStorage
6. **é‡æ–°åˆå§‹åŒ–æµè§ˆå™¨** - `accountInitializer.initializeAccount(accountConfig)`
7. **æµè§ˆå™¨å¯åŠ¨æˆåŠŸ** - ä½¿ç”¨æ–°çš„ç”¨æˆ·æ•°æ®å’Œ tab

## çŠ¶æ€

ğŸŸ¢ **å·²è§£å†³** - 2025-11-25 ä¿®å¤å®Œæˆ

**ä¿®å¤æ±‡æ€»**ï¼š
1. âœ… æ·»åŠ  `cleanUserDataDir()` æ–¹æ³•æ¸…ç†æµè§ˆå™¨ç”¨æˆ·æ•°æ®ç›®å½•
2. âœ… åœ¨æ‰‹åŠ¨ç™»å½•å¤„ç†å™¨ä¸­è°ƒç”¨ `cleanUserDataDir()`
3. âœ… åœ¨æ‰‹åŠ¨ç™»å½•å¤„ç†å™¨ä¸­è°ƒç”¨ `clearAccountTabs()` æ¸…ç†æ—§ tab å¼•ç”¨
4. âœ… Worker é‡å¯åç™»å½•æ£€æµ‹æˆåŠŸï¼Œä»»åŠ¡æ­£å¸¸å¯åŠ¨
