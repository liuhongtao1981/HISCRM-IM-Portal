# å®æ—¶ç›‘æ§ + å†å²çˆ¬è™«æ··åˆæ–¹æ¡ˆ - å¼€å‘è®¡åˆ’ v3.0 ç²¾ç®€ç‰ˆ

**åˆ›å»ºæ—¥æœŸ**: 2025-11-06
**æ–¹æ¡ˆç‰ˆæœ¬**: v3.0 (ç²¾ç®€ç‰ˆ)
**é¢„è®¡å·¥æœŸ**: 2-3ä¸ªå·¥ä½œæ—¥

---

## ğŸ“‹ æ ¸å¿ƒæ€è·¯

### ç°çŠ¶åˆ†æ

âœ… **ç°æœ‰èƒ½åŠ›**:
- `crawlComments(account)` - è¯„è®ºçˆ¬è™«,æ‰‹åŠ¨è°ƒç”¨
- `crawlDirectMessages(account)` - ç§ä¿¡çˆ¬è™«,æ‰‹åŠ¨è°ƒç”¨
- `IncrementalCrawlService` - å¢é‡åˆ¤æ–­é€»è¾‘
- `DouyinDataManager` - æ•°æ®æ˜ å°„å±‚

âŒ **ç¼ºå¤±èƒ½åŠ›**:
- âŒ æ²¡æœ‰å®æ—¶ç›‘æ§(é›¶å»¶è¿Ÿé’©å­)
- âŒ æ²¡æœ‰å®šæ—¶è°ƒåº¦å™¨
- âŒ çˆ¬è™«å’Œå®æ—¶æ•°æ®æ²¡æœ‰æ•´åˆ

### è§£å†³æ–¹æ¡ˆ

```
DouyinPlatform.startMonitoring(accountId)
    â†“
    â”œâ”€â”€ 1. å¯åŠ¨å®æ—¶ç›‘æ§ (RealtimeMonitor)
    â”‚   â”œâ”€â”€ æ³¨å…¥é’©å­è„šæœ¬
    â”‚   â”œâ”€â”€ ç›‘å¬ msgListToPush (ç§ä¿¡)
    â”‚   â””â”€â”€ ç›‘å¬ noticePushList (è¯„è®º)
    â”‚
    â””â”€â”€ 2. å¯åŠ¨å®šæ—¶çˆ¬è™« (CrawlScheduler)
        â”œâ”€â”€ æ¯5-10åˆ†é’Ÿè§¦å‘ä¸€æ¬¡
        â”œâ”€â”€ è°ƒç”¨ this.crawlDirectMessages()
        â””â”€â”€ è°ƒç”¨ this.crawlComments()
```

---

## ğŸ¯ å¼€å‘ä»»åŠ¡ (ç®€åŒ–ç‰ˆ)

### ä»»åŠ¡ 1: å®æ—¶ç›‘æ§æ¨¡å— (1å¤©)

#### 1.1 é’©å­è„šæœ¬ (æµè§ˆå™¨ç«¯)
**æ–‡ä»¶**: `packages/worker/src/platforms/douyin/hooks/install-realtime-hooks.js`

**è¯´æ˜**: ç²¾ç®€ç‰ˆ,åªä¿ç•™æ ¸å¿ƒåŠŸèƒ½

```javascript
/**
 * æµè§ˆå™¨ç«¯é’©å­æ³¨å…¥è„šæœ¬(ç²¾ç®€ç‰ˆ)
 * æ”¹ç¼–è‡ª test-realtime-hook-monitor-v2.js
 */
(function() {
  'use strict';

  // æå– imStore å’Œ noticeStore
  function extractStore(storeName) {
    const root = document.querySelector('#root') || document.querySelector('[data-reactroot]');
    if (!root) return null;

    const fiberKey = Object.keys(root).find(key =>
      key.startsWith('__reactFiber$')
    );
    if (!fiberKey) return null;

    let fiber = root[fiberKey];
    while (fiber) {
      const state = fiber.memoizedState || fiber.stateNode?.state;
      if (state?.[storeName]) return state[storeName];

      const props = fiber.memoizedProps;
      if (props?.[storeName]) return props[storeName];

      fiber = fiber.return;
    }
    return null;
  }

  // åŠ«æŒæ•°ç»„æ–¹æ³•
  function hijackArray(arr, onAdd, name) {
    const originalPush = arr.push;

    arr.push = function(...items) {
      console.log(`ğŸ¯ [Hook] ${name}.push() æ•è· ${items.length} é¡¹`);
      items.forEach(item => {
        try { onAdd(item); }
        catch (e) { console.error('Hookå›è°ƒé”™è¯¯:', e); }
      });
      return originalPush.apply(this, items);
    };
  }

  // å¤„ç†ç§ä¿¡
  function handleMessage(msg) {
    console.log('âš¡ æ–°ç§ä¿¡:', msg.serverId);
    if (typeof window.__sendToNode === 'function') {
      window.__sendToNode({ type: 'message', data: msg });
    }
  }

  // å¤„ç†è¯„è®º
  function handleComment(notice) {
    if (notice.type !== 31) return; // åªå¤„ç†è¯„è®ºé€šçŸ¥
    console.log('âš¡ æ–°è¯„è®º:', notice.nid_str);
    if (typeof window.__sendToNode === 'function') {
      window.__sendToNode({ type: 'comment', data: notice });
    }
  }

  // å®‰è£…é’©å­
  function install() {
    const imStore = extractStore('imStore');
    const noticeStore = extractStore('noticeStore');

    let count = 0;
    if (imStore?.msgListToPush) {
      hijackArray(imStore.msgListToPush, handleMessage, 'msgListToPush');
      console.log('âœ… ç§ä¿¡é’©å­å·²å®‰è£…');
      count++;
    }

    if (noticeStore?.noticePushList) {
      hijackArray(noticeStore.noticePushList, handleComment, 'noticePushList');
      console.log('âœ… è¯„è®ºé’©å­å·²å®‰è£…');
      count++;
    }

    return { success: count > 0, count };
  }

  // æ‰§è¡Œå®‰è£…
  const result = install();
  if (!result.success) {
    setTimeout(install, 3000); // 3ç§’åé‡è¯•
  }

  // æš´éœ²çŠ¶æ€æ£€æŸ¥å‡½æ•°
  window.__checkHooks = () => ({
    installed: true,
    timestamp: Date.now()
  });

})();
```

**é¢„è®¡æ—¶é—´**: 2å°æ—¶

---

#### 1.2 å®æ—¶ç›‘æ§ç®¡ç†å™¨ (Node.js ç«¯)
**æ–‡ä»¶**: `packages/worker/src/platforms/douyin/realtime-monitor.js`

**è¯´æ˜**: ç®€åŒ–ç‰ˆ,æ ¸å¿ƒåŠŸèƒ½

```javascript
/**
 * æŠ–éŸ³å®æ—¶ç›‘æ§ç®¡ç†å™¨ (ç²¾ç®€ç‰ˆ)
 */
const path = require('path');
const { createLogger } = require('@hiscrm-im/shared/utils/logger');

class DouyinRealtimeMonitor {
  constructor(accountId, page, platform) {
    this.accountId = accountId;
    this.page = page;
    this.platform = platform;
    this.logger = createLogger(`realtime:${accountId}`);
    this.processedIds = new Set();
  }

  /**
   * å¯åŠ¨ç›‘æ§
   */
  async start() {
    this.logger.info('å¯åŠ¨å®æ—¶ç›‘æ§');

    // 1. æ³¨å…¥é’©å­
    await this.installHooks();

    // 2. æš´éœ²å‡½æ•°
    await this.page.exposeFunction('__sendToNode', async (data) => {
      await this.handleData(data);
    });

    // 3. ç›‘å¬é¡µé¢åˆ·æ–°
    this.page.on('framenavigated', async () => {
      this.logger.info('é¡µé¢åˆ·æ–°,é‡æ–°æ³¨å…¥é’©å­');
      setTimeout(() => this.installHooks(), 2000);
    });

    this.logger.info('âœ… å®æ—¶ç›‘æ§å·²å¯åŠ¨');
  }

  /**
   * æ³¨å…¥é’©å­è„šæœ¬
   */
  async installHooks() {
    const scriptPath = path.join(__dirname, 'hooks', 'install-realtime-hooks.js');
    await this.page.addScriptTag({ path: scriptPath });
    await this.page.waitForTimeout(1000);

    const status = await this.page.evaluate(() => {
      return typeof window.__checkHooks === 'function'
        ? window.__checkHooks()
        : { installed: false };
    });

    this.logger.info('é’©å­çŠ¶æ€:', status);
  }

  /**
   * å¤„ç†å®æ—¶æ•°æ®
   */
  async handleData(data) {
    const { type, data: rawData } = data;

    try {
      // å»é‡
      const id = type === 'message' ? rawData.serverId : rawData.nid_str;
      if (this.processedIds.has(id)) return;
      this.processedIds.add(id);

      // æ ¼å¼åŒ–æ•°æ®
      let formatted;
      if (type === 'message') {
        formatted = this.formatMessage(rawData);
      } else if (type === 'comment') {
        formatted = this.formatComment(rawData);
      }

      if (!formatted) return;

      // æ¨é€åˆ° DataManager
      const dataManager = this.platform.dataManagers.get(this.accountId);
      if (!dataManager) {
        this.logger.warn('DataManager æœªæ‰¾åˆ°');
        return;
      }

      if (type === 'message') {
        await dataManager.pushMessage(formatted, 'realtime');
      } else if (type === 'comment') {
        await dataManager.pushComment(formatted, 'realtime');
      }

      this.logger.info(`âœ… [å®æ—¶] ${type} å·²æ¨é€:`, id);

    } catch (error) {
      this.logger.error('å¤„ç†å®æ—¶æ•°æ®å¤±è´¥:', error);
    }
  }

  /**
   * æ ¼å¼åŒ–ç§ä¿¡
   */
  formatMessage(raw) {
    try {
      const content = JSON.parse(raw.content);
      return {
        message_id: raw.serverId,
        platform_message_id: raw.serverId,
        conversation_id: raw.conversationId,
        platform_sender_id: raw.sender,
        sender_id: raw.secSender,
        type: 'text',
        content: content.text,
        text: content.text,
        direction: 'incoming',
        created_at: new Date(raw.createdAt).getTime(),
        rawData: raw
      };
    } catch (error) {
      this.logger.error('æ ¼å¼åŒ–ç§ä¿¡å¤±è´¥:', error);
      return null;
    }
  }

  /**
   * æ ¼å¼åŒ–è¯„è®º
   */
  formatComment(raw) {
    try {
      const comment = raw.comment?.comment;
      if (!comment) return null;

      return {
        cid: comment.cid,
        comment_id: comment.cid,
        aweme_id: raw.comment?.aweme?.aweme_id,
        user: comment.user,
        user_id: comment.user?.uid,
        text: comment.text,
        content: comment.text,
        digg_count: comment.digg_count || 0,
        create_time: raw.create_time,
        created_at: raw.create_time * 1000,
        rawData: raw
      };
    } catch (error) {
      this.logger.error('æ ¼å¼åŒ–è¯„è®ºå¤±è´¥:', error);
      return null;
    }
  }

  /**
   * åœæ­¢ç›‘æ§
   */
  async stop() {
    this.logger.info('åœæ­¢å®æ—¶ç›‘æ§');
  }
}

module.exports = { DouyinRealtimeMonitor };
```

**é¢„è®¡æ—¶é—´**: 4å°æ—¶

---

### ä»»åŠ¡ 2: å®šæ—¶è°ƒåº¦å™¨ (0.5å¤©)

**æ–‡ä»¶**: `packages/worker/src/platforms/douyin/crawl-scheduler.js`

```javascript
/**
 * æŠ–éŸ³çˆ¬è™«è°ƒåº¦å™¨ (ç²¾ç®€ç‰ˆ)
 * å®šæ—¶è°ƒç”¨ç°æœ‰çˆ¬è™«å‡½æ•°
 */
const { createLogger } = require('@hiscrm-im/shared/utils/logger');

class DouyinCrawlScheduler {
  constructor(accountId, config, platform) {
    this.accountId = accountId;
    this.config = config;
    this.platform = platform;
    this.logger = createLogger(`scheduler:${accountId}`);

    this.intervalId = null;
    this.isRunning = false;
  }

  /**
   * å¯åŠ¨è°ƒåº¦å™¨
   */
  start() {
    const minutes = this.config.crawlInterval || 5;
    const ms = minutes * 60 * 1000;

    this.logger.info(`å¯åŠ¨è°ƒåº¦å™¨, é—´éš”: ${minutes} åˆ†é’Ÿ`);

    this.intervalId = setInterval(async () => {
      if (this.isRunning) {
        this.logger.warn('ä¸Šæ¬¡ä»»åŠ¡æœªå®Œæˆ,è·³è¿‡');
        return;
      }

      this.isRunning = true;
      try {
        await this.executeCrawl();
      } catch (error) {
        this.logger.error('çˆ¬è™«æ‰§è¡Œå¤±è´¥:', error);
      } finally {
        this.isRunning = false;
      }
    }, ms);

    // 10ç§’åæ‰§è¡Œé¦–æ¬¡çˆ¬å–
    setTimeout(() => {
      this.executeCrawl().catch(err => {
        this.logger.error('é¦–æ¬¡çˆ¬å–å¤±è´¥:', err);
      });
    }, 10000);

    this.logger.info('âœ… è°ƒåº¦å™¨å·²å¯åŠ¨');
  }

  /**
   * æ‰§è¡Œçˆ¬è™«
   */
  async executeCrawl() {
    this.logger.info('å¼€å§‹æ‰§è¡Œçˆ¬è™«...');

    const account = this.platform.accounts.get(this.accountId);
    if (!account) {
      this.logger.error('è´¦æˆ·æœªæ‰¾åˆ°');
      return;
    }

    try {
      // 1. çˆ¬å–ç§ä¿¡ (å¦‚æœå¯ç”¨)
      if (this.config.crawlMessages !== false) {
        this.logger.info('çˆ¬å–ç§ä¿¡...');
        await this.platform.crawlDirectMessages(account);
        this.logger.info('âœ… ç§ä¿¡çˆ¬å–å®Œæˆ');
      }

      // 2. çˆ¬å–è¯„è®º (å¦‚æœå¯ç”¨)
      if (this.config.crawlComments !== false) {
        this.logger.info('çˆ¬å–è¯„è®º...');
        await this.platform.crawlComments(account);
        this.logger.info('âœ… è¯„è®ºçˆ¬å–å®Œæˆ');
      }

      this.logger.info('âœ… çˆ¬è™«ä»»åŠ¡å®Œæˆ');

    } catch (error) {
      this.logger.error('çˆ¬è™«ä»»åŠ¡å¤±è´¥:', error);
      throw error;
    }
  }

  /**
   * åœæ­¢è°ƒåº¦å™¨
   */
  stop() {
    if (this.intervalId) {
      clearInterval(this.intervalId);
      this.intervalId = null;
    }
    this.logger.info('è°ƒåº¦å™¨å·²åœæ­¢');
  }

  /**
   * æ›´æ–°é—´éš”
   */
  updateInterval(minutes) {
    this.logger.info(`æ›´æ–°é—´éš”: ${minutes} åˆ†é’Ÿ`);
    this.config.crawlInterval = minutes;
    this.stop();
    this.start();
  }
}

module.exports = { DouyinCrawlScheduler };
```

**é¢„è®¡æ—¶é—´**: 3å°æ—¶

---

### ä»»åŠ¡ 3: é›†æˆåˆ° Platform (0.5å¤©)

**æ–‡ä»¶**: `packages/worker/src/platforms/douyin/platform.js`

**åœ¨æ–‡ä»¶å¤´éƒ¨æ·»åŠ å¯¼å…¥**:
```javascript
const { DouyinRealtimeMonitor } = require('./realtime-monitor');
const { DouyinCrawlScheduler } = require('./crawl-scheduler');
```

**åœ¨ constructor ä¸­æ·»åŠ **:
```javascript
constructor(config, workerBridge, browserManager) {
  super(config, workerBridge, browserManager);
  this.loginHandler = new DouyinLoginHandler(browserManager, workerBridge.socket);

  // æ–°å¢: å­˜å‚¨ç›‘æ§å’Œè°ƒåº¦å™¨å®ä¾‹
  this.realtimeMonitors = new Map(); // accountId -> RealtimeMonitor
  this.crawlSchedulers = new Map();  // accountId -> CrawlScheduler
}
```

**æ–°å¢æ–¹æ³•**:
```javascript
/**
 * å¯åŠ¨ç›‘æ§
 * @param {string} accountId - è´¦æˆ·ID
 */
async startMonitoring(accountId) {
  logger.info(`å¯åŠ¨ç›‘æ§: ${accountId}`);

  // 1. è·å–è´¦æˆ·å’Œé…ç½®
  const account = this.accounts.get(accountId);
  if (!account) {
    throw new Error(`è´¦æˆ· ${accountId} æœªæ‰¾åˆ°`);
  }

  // 2. è§£æé…ç½®
  const config = this.parseMonitorConfig(account);

  // 3. è·å–é¡µé¢
  const { page } = await this.getPageWithAPI(accountId, {
    tag: TabTag.SPIDER_GENERAL,
    persistent: true,
    shareable: false,
    forceNew: false
  });

  // 4. å¯åŠ¨å®æ—¶ç›‘æ§ (å¦‚æœå¯ç”¨)
  if (config.enableRealtimeMonitor !== false) {
    const monitor = new DouyinRealtimeMonitor(accountId, page, this);
    await monitor.start();
    this.realtimeMonitors.set(accountId, monitor);
    logger.info(`âœ… å®æ—¶ç›‘æ§å·²å¯åŠ¨: ${accountId}`);
  }

  // 5. å¯åŠ¨çˆ¬è™«è°ƒåº¦å™¨ (å¦‚æœå¯ç”¨)
  if (config.enableCrawl !== false) {
    const scheduler = new DouyinCrawlScheduler(accountId, config, this);
    scheduler.start();
    this.crawlSchedulers.set(accountId, scheduler);
    logger.info(`âœ… çˆ¬è™«è°ƒåº¦å™¨å·²å¯åŠ¨: ${accountId}`);
  }

  logger.info(`âœ… ç›‘æ§å¯åŠ¨å®Œæˆ: ${accountId}`);
}

/**
 * åœæ­¢ç›‘æ§
 * @param {string} accountId - è´¦æˆ·ID
 */
async stopMonitoring(accountId) {
  logger.info(`åœæ­¢ç›‘æ§: ${accountId}`);

  // åœæ­¢å®æ—¶ç›‘æ§
  const monitor = this.realtimeMonitors.get(accountId);
  if (monitor) {
    await monitor.stop();
    this.realtimeMonitors.delete(accountId);
  }

  // åœæ­¢çˆ¬è™«è°ƒåº¦å™¨
  const scheduler = this.crawlSchedulers.get(accountId);
  if (scheduler) {
    scheduler.stop();
    this.crawlSchedulers.delete(accountId);
  }

  logger.info(`âœ… ç›‘æ§å·²åœæ­¢: ${accountId}`);
}

/**
 * è§£æç›‘æ§é…ç½®
 * @param {Object} account - è´¦æˆ·å¯¹è±¡
 * @returns {Object} é…ç½®å¯¹è±¡
 */
parseMonitorConfig(account) {
  // é»˜è®¤é…ç½®
  const defaultConfig = {
    enableRealtimeMonitor: true,  // å¯ç”¨å®æ—¶ç›‘æ§
    enableCrawl: true,             // å¯ç”¨å®šæ—¶çˆ¬è™«
    crawlInterval: 5,              // çˆ¬è™«é—´éš”(åˆ†é’Ÿ)
    crawlMessages: true,           // çˆ¬å–ç§ä¿¡
    crawlComments: true            // çˆ¬å–è¯„è®º
  };

  // ä»è´¦æˆ·é…ç½®è¯»å–
  let customConfig = {};
  if (account.monitoring_config) {
    try {
      customConfig = JSON.parse(account.monitoring_config);
    } catch (error) {
      logger.warn(`è§£æç›‘æ§é…ç½®å¤±è´¥: ${account.id}`, error);
    }
  }

  return { ...defaultConfig, ...customConfig };
}

/**
 * è·å–ç›‘æ§çŠ¶æ€
 * @param {string} accountId - è´¦æˆ·ID
 * @returns {Object} çŠ¶æ€å¯¹è±¡
 */
getMonitoringStatus(accountId) {
  const monitor = this.realtimeMonitors.get(accountId);
  const scheduler = this.crawlSchedulers.get(accountId);

  return {
    realtime: {
      enabled: !!monitor,
      active: !!monitor
    },
    crawl: {
      enabled: !!scheduler,
      active: !!scheduler,
      interval: scheduler?.config.crawlInterval
    }
  };
}
```

**é¢„è®¡æ—¶é—´**: 3å°æ—¶

---

## ğŸ“Š é…ç½®è¯´æ˜

### è´¦æˆ·é…ç½®ç¤ºä¾‹

åœ¨ `accounts` è¡¨çš„ `monitoring_config` å­—æ®µä¸­å­˜å‚¨ JSON:

```json
{
  "enableRealtimeMonitor": true,
  "enableCrawl": true,
  "crawlInterval": 5,
  "crawlMessages": true,
  "crawlComments": true
}
```

### é…ç½®é€‰é¡¹

| å­—æ®µ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|-----|------|--------|------|
| `enableRealtimeMonitor` | Boolean | true | æ˜¯å¦å¯ç”¨å®æ—¶ç›‘æ§ |
| `enableCrawl` | Boolean | true | æ˜¯å¦å¯ç”¨å®šæ—¶çˆ¬è™« |
| `crawlInterval` | Number | 5 | çˆ¬è™«é—´éš”(åˆ†é’Ÿ) |
| `crawlMessages` | Boolean | true | æ˜¯å¦çˆ¬å–ç§ä¿¡ |
| `crawlComments` | Boolean | true | æ˜¯å¦çˆ¬å–è¯„è®º |

---

## ğŸ“… å¼€å‘æ—¶é—´çº¿

| é˜¶æ®µ | ä»»åŠ¡ | å·¥ä½œæ—¥ |
|-----|------|--------|
| ä»»åŠ¡1 | å®æ—¶ç›‘æ§æ¨¡å— | 1å¤© |
| ä»»åŠ¡2 | å®šæ—¶è°ƒåº¦å™¨ | 0.5å¤© |
| ä»»åŠ¡3 | é›†æˆåˆ° Platform | 0.5å¤© |
| æµ‹è¯• | é›†æˆæµ‹è¯• | 0.5å¤© |

**æ€»è®¡**: 2.5 ä¸ªå·¥ä½œæ—¥

---

## ğŸ§ª æµ‹è¯•è®¡åˆ’

### æµ‹è¯•ç”¨ä¾‹

| åœºæ™¯ | æ“ä½œ | é¢„æœŸç»“æœ |
|-----|------|---------|
| å®æ—¶ç§ä¿¡ | å‘é€ç§ä¿¡ | ç«‹å³æ•è·,source=realtime |
| å®æ—¶è¯„è®º | å‘é€è¯„è®º | ç«‹å³æ•è·,source=realtime |
| å®šæ—¶ç§ä¿¡ | ç­‰å¾…5åˆ†é’Ÿ | è‡ªåŠ¨æ‰§è¡Œ,source=crawl |
| å®šæ—¶è¯„è®º | ç­‰å¾…5åˆ†é’Ÿ | è‡ªåŠ¨æ‰§è¡Œ,source=crawl |
| æ•°æ®å»é‡ | åŒä¸€æ¶ˆæ¯ | ä¸é‡å¤ |
| é¡µé¢åˆ·æ–° | åˆ·æ–°é¡µé¢ | é’©å­è‡ªåŠ¨é‡æ–°æ³¨å…¥ |

---

## âœ… ä¼˜åŠ¿

1. **æç®€è®¾è®¡** - åªæ–°å¢3ä¸ªæ–‡ä»¶,æ ¸å¿ƒä»£ç  < 500è¡Œ
2. **é›¶æ”¹åŠ¨** - ç°æœ‰çˆ¬è™«ä»£ç 100%ä¸åŠ¨
3. **çµæ´»é…ç½®** - å¯å•ç‹¬å¯ç”¨/ç¦ç”¨ä»»ä¸€æ¨¡å¼
4. **åŒé‡ä¿éšœ** - å®æ—¶ + å®šæ—¶,äº’ä¸ºå¤‡ä»½

---

## ğŸ“ ä½¿ç”¨æ–¹å¼

### å¯åŠ¨ç›‘æ§

```javascript
// åœ¨ Worker åˆå§‹åŒ–å
await douyinPlatform.startMonitoring('account_123');
```

### åœæ­¢ç›‘æ§

```javascript
await douyinPlatform.stopMonitoring('account_123');
```

### æŸ¥çœ‹çŠ¶æ€

```javascript
const status = douyinPlatform.getMonitoringStatus('account_123');
console.log(status);
// {
//   realtime: { enabled: true, active: true },
//   crawl: { enabled: true, active: true, interval: 5 }
// }
```

---

**æ–‡æ¡£çŠ¶æ€**: âœ… å·²ç²¾ç®€
**å¼€å‘çŠ¶æ€**: â³ å¾…å¼€å§‹
**ä¼˜å…ˆçº§**: ğŸ”¥ é«˜

